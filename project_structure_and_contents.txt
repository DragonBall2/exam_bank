Project structure
-----------------
./
    .bashrc
    app.py
    requirements.txt
    .bash_history
    .devcontainer/
        icon.svg
        devcontainer.json
    templates/
        login.html
        index.html
        edit_question.html
        change_password.html
        manage_categories.html
        register.html
    __pycache__/
        app.cpython-310.pyc
    static/
        styles.css

./
    .bashrc
    -------
    # 히스토리 파일의 위치
    HISTFILE=/workspaces/codespaces-blank/.bash_history
    
    # 히스토리에 저장할 명령의 최대 개수
    HISTSIZE=1000
    
    # 히스토리 파일에 저장할 명령의 최대 개수
    HISTFILESIZE=2000
    
    # 동일한 명령어를 히스토리에 여러 번 저장하지 않도록 설정
    HISTCONTROL=ignoredups:erasedups
    
    # 각 명령어에 타임스탬프를 추가
    HISTTIMEFORMAT="%F %T "
    
    # 쉘 세션이 종료될 때마다 히스토리 파일을 업데이트
    shopt -s histappend

    app.py
    ------
    from flask import Flask, render_template, request, redirect, flash, url_for, send_file, jsonify
    from flask_login import LoginManager, UserMixin, login_user, login_required, logout_user, current_user
    import json
    import os
    import matplotlib.pyplot as plt
    import matplotlib.font_manager as fm
    from io import BytesIO
    import base64
    from werkzeug.security import generate_password_hash, check_password_hash
    from datetime import datetime
    
    
    app = Flask(__name__)
    app.secret_key = 'your_secret_key'
    
    
    login_manager = LoginManager()
    login_manager.init_app(app)
    login_manager.login_view = 'login'
    
    
    DATA_FILE = 'data.json'
    USERS_FILE = 'users.json'
    VOC_FILE = 'voc.json'
    CATEGORIES_FILE = 'categories.json'
    FONT_PATH = 'templates/NanumGothic.ttf'
    
    
    if not os.path.exists(DATA_FILE):
       with open(DATA_FILE, 'w', encoding='utf-8') as f:
           json.dump([], f, ensure_ascii=False, indent=4)
    
    
    if not os.path.exists(USERS_FILE):
       with open(USERS_FILE, 'w', encoding='utf-8') as f:
           json.dump([], f, ensure_ascii=False, indent=4)
    
    
    if not os.path.exists(VOC_FILE):
       with open(VOC_FILE, 'w', encoding='utf-8') as f:
           json.dump([], f, ensure_ascii=False, indent=4)
    
    
    if not os.path.exists(CATEGORIES_FILE):
       with open(CATEGORIES_FILE, 'w', encoding='utf-8') as f:
           json.dump({'categories': []}, f, ensure_ascii=False, indent=4)
    
    
    class User(UserMixin):
       def __init__(self, id):
           self.id = id
           self.password_hash = None
    
    
       @staticmethod
       def get(user_id):
           with open(USERS_FILE, 'r', encoding='utf-8') as f:
               users = json.load(f)
           user = next((u for u in users if u['id'] == user_id), None)
           if user:
               user_obj = User(user['id'])
               user_obj.password_hash = user['password']
               return user_obj
           return None
    
    
       def set_password(self, password):
           self.password_hash = generate_password_hash(password)
    
    
       def check_password(self, password):
           return check_password_hash(self.password_hash, password)
    
    
    @login_manager.user_loader
    def load_user(user_id):
       return User.get(user_id)
    
    
    def autopct_format(values):
       def my_format(pct):
           total = sum(values)
           val = int(round(pct*total/100.0))
           return f'{pct:.1f}%\n({val:d})'
       return my_format
    
    
    def generate_category_pie_chart(data):
        category_count = {}
        total_questions = len(data)
        for question in data:
            if 'Category' in question and 'main' in question['Category']:
                category = question['Category']['main'] if question['Category']['main'] else '미분류'
                if category in category_count:
                    category_count[category] += 1
                else:
                    category_count[category] = 1
    
        labels = list(category_count.keys())
        sizes = list(category_count.values())
    
        fontprop = fm.FontProperties(fname=FONT_PATH, size=12)
    
        plt.figure(figsize=(6, 6))
        plt.pie(sizes, labels=labels, autopct=autopct_format(sizes), startangle=140)
    
        # 라벨에 폰트 적용
        for label in plt.gca().texts:
            label.set_fontproperties(fontprop)
    
        plt.tight_layout()
        img = BytesIO()
        plt.savefig(img, format='png')
        img.seek(0)
        img_base64 = base64.b64encode(img.getvalue()).decode()
        plt.close()
        return img_base64
    
    
    
    
    
    @app.route('/')
    @login_required
    def index():
        with open(DATA_FILE, 'r', encoding='utf-8') as f:
            data = json.load(f)
        if current_user.id == 'admin':
            user_questions = data
        else:
            user_questions = [q for q in data if q['SubmitterID'] == current_user.id]
    
        last_type = request.cookies.get('last_type')
        last_category = {
            'main': request.cookies.get('last_main_category', ''),
            'sub': request.cookies.get('last_sub_category', ''),
            'minor': request.cookies.get('last_minor_category', '')
        }
        last_tags = request.cookies.get('last_tags')
        last_source = request.cookies.get('last_source', '')
    
        for question in user_questions:
            if 'Source' not in question:
                question['Source'] = '출처 없음'
            if 'SubmissionTime' not in question:
                question['SubmissionTime'] = 'N/A'
            if 'LastModifiedTime' not in question or not question['LastModifiedTime']:
                question['LastModifiedTime'] = '수정되지 않음'
    
        chart_base64 = generate_category_pie_chart(data)  # 전체 문제 데이터 사용
        return render_template('index.html', questions=user_questions, user=current_user, last_type=last_type, last_category=last_category, last_tags=last_tags, last_source=last_source, chart_base64=chart_base64, total_questions=len(data))
    
    
    
    
    
    @app.route('/register', methods=['GET', 'POST'])
    def register():
       if request.method == 'POST':
           user_id = request.form['user_id']
           password = request.form['password']
           user = User.get(user_id)
           if user is not None:
               flash('User ID already exists.', 'error')
           else:
               user = User(user_id)
               user.set_password(password)
               with open(USERS_FILE, 'r', encoding='utf-8') as f:
                   users = json.load(f)
               users.append({'id': user_id, 'password': user.password_hash})
               with open(USERS_FILE, 'w', encoding='utf-8') as f:
                   json.dump(users, f, ensure_ascii=False, indent=4)
               flash('User registered successfully!', 'success')
               return redirect(url_for('login'))
       return render_template('register.html')
    
    
    @app.route('/login', methods=['GET', 'POST'])
    def login():
       if request.method == 'POST':
           user_id = request.form['user_id']
           password = request.form['password']
           user = User.get(user_id)
           if user is None or not user.check_password(password):
               flash('Invalid user ID or password.', 'error')
           else:
               login_user(user)
               response = redirect(url_for('index'))
               response.set_cookie('last_type', '', expires=0)
               response.set_cookie('last_main_category', '', expires=0)
               response.set_cookie('last_sub_category', '', expires=0)
               response.set_cookie('last_minor_category', '', expires=0)
               response.set_cookie('last_tags', '', expires=0)
               return response
       return render_template('login.html')
    
    
    @app.route('/logout')
    @login_required
    def logout():
       logout_user()
       response = redirect(url_for('login'))
       response.set_cookie('last_type', '', expires=0)
       response.set_cookie('last_main_category', '', expires=0)
       response.set_cookie('last_sub_category', '', expires=0)
       response.set_cookie('last_minor_category', '', expires=0)
       response.set_cookie('last_tags', '', expires=0)
       return response
    
    
    from werkzeug.utils import secure_filename
    
    UPLOAD_FOLDER = 'image_data'
    app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER
    
    # Ensure the upload folder exists
    if not os.path.exists(UPLOAD_FOLDER):
        os.makedirs(UPLOAD_FOLDER)
    
    def save_image(file, filename):
        if file:
            folder_path = os.path.join(app.config['UPLOAD_FOLDER'], str(filename.split('_')[-1].split('.')[0]))
            if not os.path.exists(folder_path):
                os.makedirs(folder_path)
            filepath = os.path.join(folder_path, filename)
            file.save(filepath)
            return filepath
        return None
    
    @app.route('/submit', methods=['POST'])
    @login_required
    def submit_question():
        question_type = request.form['question_type']
        choices = []
    
        if question_type == 'multiple':
            question = request.form['mc_question']
            choices = request.form.getlist('mc_choices[]')
            answers = request.form.getlist('mc_answers[]')
        elif question_type == 'subjective':
            question = request.form['sub_question']
            answer = request.form['sub_answer']
            answers = [answer]
        elif question_type == 'fill_in_the_blank':
            question = request.form['fib_question']
            raw_answers = request.form.getlist('fib_answer[]')
            others = request.form.getlist('fib_others[]')
            answers = {f"Blank#{i + 1}": answer for i, answer in enumerate(raw_answers)}
            for i, other in enumerate(others):
                answers[f"other#{i + 1}"] = other  # Add each other choice with a unique key
    
        main_category = request.form['main_category']
        sub_category = request.form['sub_category']
        minor_category = request.form['minor_category']
        tags = request.form['tags']
        source = request.form['source']
    
        try:
            with open(DATA_FILE, 'r', encoding='utf-8') as f:
                data = json.load(f)
    
            new_id = max([item['ID'] for item in data], default=0) + 1 if data else 1
    
            new_data = {
                'ID': new_id,
                'Type': question_type,
                'Question': question,
                'Choices': choices,
                'Answers': answers,
                'SubmitterID': current_user.id,
                'Category': {
                    'main': main_category,
                    'sub': sub_category,
                    'minor': minor_category
                },
                'Tags': tags,
                'Source': source,
                'SubmissionTime': datetime.now().strftime('%Y-%m-%d %H:%M:%S'),
                'LastModifiedTime': ''
            }
    
            data.append(new_data)
    
            with open(DATA_FILE, 'w', encoding='utf-8') as f:
                json.dump(data, f, ensure_ascii=False, indent=4)
    
            flash('Question successfully submitted!', 'success')
            response = redirect(url_for('index'))
            response.set_cookie('last_type', question_type)
            response.set_cookie('last_main_category', main_category)
            response.set_cookie('last_sub_category', sub_category)
            response.set_cookie('last_minor_category', minor_category)
            response.set_cookie('last_tags', tags)
            return response
        except Exception as e:
            flash(f'An error occurred while submitting the question: {e}', 'error')
    
        return redirect(url_for('index'))
    
    
    
    @app.route('/edit/<int:question_id>', methods=['GET', 'POST'])
    @login_required
    def edit_question(question_id):
        with open(DATA_FILE, 'r', encoding='utf-8') as f:
            data = json.load(f)
        
        # 기존 데이터를 찾음
        question = next((q for q in data if q['ID'] == question_id and (q['SubmitterID'] == current_user.id or current_user.id == 'admin')), None)
        
        if question is None:
            flash('Question not found or you do not have permission to edit it.', 'error')
            return redirect(url_for('index'))
        
        if request.method == 'POST':
            question_type = request.form['question_type']
            new_question = {}
            
            # 폼 데이터를 바탕으로 새로운 데이터를 생성
            if question_type == 'multiple':
                new_question = {
                    'Question': request.form['mc_question'],
                    'Choices': request.form.getlist('mc_choices[]'),
                    'Answers': request.form.getlist('mc_answers[]')
                }
            elif question_type == 'subjective':
                new_question = {
                    'Question': request.form['sub_question'],
                    'Answers': [request.form['sub_answer']],
                    'Choices': None
                }
            elif question_type == 'fill_in_the_blank':
                raw_answers = request.form.getlist('fib_answer[]')
                other_choices = request.form.getlist('fib_others[]')
                answers = {f"Blank#{i + 1}": answer for i, answer in enumerate(raw_answers)}
                for i, other in enumerate(other_choices):
                    answers[f"other#{i + 1}"] = other  # Add each other choice with a unique key
                
                new_question = {
                    'Question': request.form['fib_question'],
                    'Answers': answers,
                    'Choices': None
                }
            
            # 카테고리, 태그, 출처, 시간 정보 등을 설정
            new_question.update({
                'ID': question['ID'],  # 기존 ID 유지
                'Type': question_type,
                'SubmitterID': current_user.id,
                'Category': {
                    'main': request.form['main_category'],
                    'sub': request.form['sub_category'],
                    'minor': request.form['minor_category']
                },
                'Tags': request.form['tags'],
                'Source': request.form['source'],
                'SubmissionTime': question['SubmissionTime'],  # 기존 제출 시간 유지
                'LastModifiedTime': datetime.now().strftime('%Y-%m-%d %H:%M:%S')  # 현재 시간으로 수정 시간 설정
            })
            
            # 기존 데이터를 덮어쓰지 않고 새로운 데이터를 생성하여 리스트에 저장
            data = [q if q['ID'] != question_id else new_question for q in data]
            
            # 데이터 파일에 저장
            with open(DATA_FILE, 'w', encoding='utf-8') as f:
                json.dump(data, f, ensure_ascii=False, indent=4)
            
            flash('Question successfully updated!', 'success')
            return redirect(url_for('index'))
        
        return render_template('edit_question.html', question=question)
    
    
    
    
    
    
    
    
    import shutil
    
    @app.route('/delete/<int:question_id>', methods=['POST'])
    @login_required
    def delete_question(question_id):
        try:
            with open(DATA_FILE, 'r', encoding='utf-8') as f:
                data = json.load(f)
            question = next((q for q in data if q['ID'] == question_id and (q['SubmitterID'] == current_user.id or current_user.id == 'admin')), None)
            if question:
                folder_path = os.path.join(app.config['UPLOAD_FOLDER'], str(question_id))
                if os.path.exists(folder_path):
                    shutil.rmtree(folder_path)
                data = [q for q in data if q['ID'] != question_id]
                with open(DATA_FILE, 'w', encoding='utf-8') as f:
                    json.dump(data, f, ensure_ascii=False, indent=4)
                flash('Question and associated images successfully deleted!', 'success')
            else:
                flash('Question not found or you do not have permission to delete it.', 'error')
        except Exception as e:
            flash(f'An error occurred while deleting the question: {e}', 'error')
        return redirect(url_for('index'))
    
    @app.route('/delete_image', methods=['POST'])
    @login_required
    def delete_image():
        try:
            data = request.get_json()
            question_id = data['question_id']
            image_type = data['image_type']
            filename_map = {
                'question_image': f'img_question_{question_id}.png',
                'answer_image': f'img_answer_{question_id}.png'
            }
            if 'choice_image_' in image_type:
                choice_num = image_type.split('_')[2]
                filename_map[image_type] = f'img_choice_{choice_num}_{question_id}.png'
            image_path = os.path.join(app.config['UPLOAD_FOLDER'], str(question_id), filename_map[image_type])
            if os.path.exists(image_path):
                os.remove(image_path)
            return jsonify(success=True)
        except Exception as e:
            return jsonify(success=False, error=str(e))
    
    
    
    @app.route('/submit_voc', methods=['POST'])
    @login_required
    def submit_voc():
       voc_type = request.form['voc_type']
       voc_content = request.form['voc_content']
    
    
       new_voc = {
           'Type': voc_type,
           'Content': voc_content,
           'SubmitterID': current_user.id
       }
    
    
       try:
           with open(VOC_FILE, 'r', encoding='utf-8') as f:
               voc_data = json.load(f)
          
           voc_data.append(new_voc)
          
           with open(VOC_FILE, 'w', encoding='utf-8') as f:
               json.dump(voc_data, f, ensure_ascii=False, indent=4)
    
    
           flash('VOC successfully submitted!', 'success')
       except Exception as e:
           flash(f'An error occurred while submitting the VOC: {e}', 'error')
      
       return redirect(url_for('index'))
    
    
    @app.route('/download_voc')
    @login_required
    def download_voc():
       return send_file(VOC_FILE, as_attachment=True)
    
    
    @app.route('/download')
    @login_required
    def download():
       return send_file(DATA_FILE, as_attachment=True)
    
    
    @app.route('/download_users')
    @login_required
    def download_users():
       if current_user.id == 'admin':
           return send_file(USERS_FILE, as_attachment=True)
       else:
           flash('You do not have permission to download this file.', 'error')
           return redirect(url_for('index'))
    
    
    @app.route('/download_categories')
    @login_required
    def download_categories():
       return send_file(CATEGORIES_FILE, as_attachment=True)
    
    
    @app.route('/categories', methods=['GET'])
    @login_required
    def get_categories():
       with open(CATEGORIES_FILE, 'r', encoding='utf-8') as f:
           categories = json.load(f)
       return jsonify(categories)
    
    
    @app.route('/manage_categories', methods=['GET', 'POST'])
    @login_required
    def manage_categories():
       if current_user.id != 'admin':
           flash('You do not have permission to manage categories.', 'error')
           return redirect(url_for('index'))
    
    
       if request.method == 'POST':
           categories_content = request.form['categories_content']
           try:
               categories = json.loads(categories_content)
               with open(CATEGORIES_FILE, 'w', encoding='utf-8') as f:
                   json.dump(categories, f, ensure_ascii=False, indent=4)
               flash('Categories updated successfully!', 'success')
           except json.JSONDecodeError:
               flash('Invalid JSON format.', 'error')
      
       with open(CATEGORIES_FILE, 'r', encoding='utf-8') as f:
           categories = json.load(f)
       return render_template('manage_categories.html', categories=json.dumps(categories, ensure_ascii=False, indent=4))
    
    
    @app.route('/change_password', methods=['GET', 'POST'])
    @login_required
    def change_password():
       if request.method == 'POST':
           old_password = request.form['old_password']
           new_password = request.form['new_password']
           confirm_password = request.form['confirm_password']
    
    
           user = User.get(current_user.id)
    
    
           if not user.check_password(old_password):
               flash('Old password is incorrect.', 'error')
           elif new_password != confirm_password:
               flash('New passwords do not match.', 'error')
           else:
               user.set_password(new_password)
               with open(USERS_FILE, 'r', encoding='utf-8') as f:
                   users = json.load(f)
               for u in users:
                   if u['id'] == user.id:
                       u['password'] = user.password_hash
                       break
               with open(USERS_FILE, 'w', encoding='utf-8') as f:
                   json.dump(users, f, ensure_ascii=False, indent=4)
               flash('Password changed successfully!', 'success')
               return redirect(url_for('index'))
       return render_template('change_password.html')
    
    
    if __name__ == '__main__':
       app.run(debug=True,port=4444)

    requirements.txt
    ----------------
    anyio==4.3.0
    argon2-cffi==23.1.0
    argon2-cffi-bindings==21.2.0
    arrow==1.3.0
    asttokens==2.4.1
    async-lru==2.0.4
    attrs==23.2.0
    Babel==2.14.0
    beautifulsoup4==4.12.3
    bleach==6.1.0
    blinker==1.8.2
    certifi==2024.2.2
    cffi==1.16.0
    charset-normalizer==3.3.2
    click==8.1.7
    colorama==0.4.6
    comm==0.2.2
    contourpy==1.2.1
    cycler==0.12.1
    debugpy==1.8.1
    decorator==5.1.1
    defusedxml==0.7.1
    exceptiongroup==1.2.0
    executing==2.0.1
    fastjsonschema==2.19.1
    filelock==3.13.3
    Flask==3.0.3
    Flask-Login==0.6.3
    fonttools==4.50.0
    fqdn==1.5.1
    fsspec==2024.3.1
    gitdb==4.0.11
    GitPython==3.1.43
    h11==0.14.0
    httpcore==1.0.5
    httpx==0.27.0
    idna==3.6
    ipykernel==6.29.4
    ipython==8.23.0
    isoduration==20.11.0
    itsdangerous==2.2.0
    jedi==0.19.1
    Jinja2==3.1.3
    joblib==1.3.2
    json5==0.9.24
    jsonpointer==2.4
    jsonschema==4.21.1
    jsonschema-specifications==2023.12.1
    jupyter-events==0.10.0
    jupyter-lsp==2.2.4
    jupyter-server-mathjax==0.2.6
    jupyter_client==8.6.1
    jupyter_core==5.7.2
    jupyter_server==2.13.0
    jupyter_server_terminals==0.5.3
    jupyterlab==4.1.5
    jupyterlab_git==0.50.0
    jupyterlab_pygments==0.3.0
    jupyterlab_server==2.25.4
    kiwisolver==1.4.5
    MarkupSafe==2.1.5
    matplotlib==3.8.3
    matplotlib-inline==0.1.6
    mistune==3.0.2
    mpmath==1.3.0
    nbclient==0.10.0
    nbconvert==7.16.3
    nbdime==4.0.1
    nbformat==5.10.3
    nest-asyncio==1.6.0
    networkx==3.2.1
    notebook_shim==0.2.4
    numpy==1.26.4
    nvidia-cublas-cu12==12.1.3.1
    nvidia-cuda-cupti-cu12==12.1.105
    nvidia-cuda-nvrtc-cu12==12.1.105
    nvidia-cuda-runtime-cu12==12.1.105
    nvidia-cudnn-cu12==8.9.2.26
    nvidia-cufft-cu12==11.0.2.54
    nvidia-curand-cu12==10.3.2.106
    nvidia-cusolver-cu12==11.4.5.107
    nvidia-cusparse-cu12==12.1.0.106
    nvidia-nccl-cu12==2.19.3
    nvidia-nvjitlink-cu12==12.4.99
    nvidia-nvtx-cu12==12.1.105
    overrides==7.7.0
    packaging==24.0
    pandas==2.2.1
    pandocfilters==1.5.1
    parso==0.8.3
    pexpect==4.9.0
    pillow==10.3.0
    platformdirs==4.2.0
    plotly==5.20.0
    prometheus_client==0.20.0
    prompt-toolkit==3.0.43
    psutil==5.9.8
    ptyprocess==0.7.0
    pure-eval==0.2.2
    pycparser==2.22
    Pygments==2.17.2
    pyparsing==3.1.2
    python-dateutil==2.9.0.post0
    python-json-logger==2.0.7
    pytz==2024.1
    PyYAML==6.0.1
    pyzmq==25.1.2
    referencing==0.34.0
    requests==2.31.0
    rfc3339-validator==0.1.4
    rfc3986-validator==0.1.1
    rpds-py==0.18.0
    scikit-learn==1.4.1.post1
    scipy==1.13.0
    seaborn==0.13.2
    Send2Trash==1.8.2
    six==1.16.0
    smmap==5.0.1
    sniffio==1.3.1
    soupsieve==2.5
    stack-data==0.6.3
    sympy==1.12
    tenacity==8.2.3
    terminado==0.18.1
    threadpoolctl==3.4.0
    tinycss2==1.2.1
    tomli==2.0.1
    torch==2.2.2
    tornado==6.4
    traitlets==5.14.2
    triton==2.2.0
    types-python-dateutil==2.9.0.20240316
    typing_extensions==4.10.0
    tzdata==2024.1
    uri-template==1.3.0
    urllib3==2.0.7
    wcwidth==0.2.13
    webcolors==1.13
    webencodings==0.5.1
    websocket-client==1.7.0
    Werkzeug==3.0.3
    

    .bash_history
    -------------

    .devcontainer/
        icon.svg
        --------
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid"><path d="M9.563 26.873c-1.22-.96-2.52-1.878-3.408-3.172-1.87-2.283-3.31-4.925-4.294-7.703-.595-1.806-.8-3.743-1.566-5.48-.802-1.26.138-2.64 1.52-3.04.615-.118 1.696-.7.39-.284-1.17.858-1.283-.78-.083-.884.82-.11 1.12-.78.84-1.382-.88-.574 2.132-1.203.616-2.06C2 1.168 5.786.84 4.852 2.774 4.63 4.26 7.498 2.5 6.832 4.218c.677.825 2.534.188 2.487 1.345.986.068 1.324.897 2.25.96.96.433 2.697.774 3.023 1.855-.95.753-3.153-1.555-3.26.53.288 3.08.214 6.252 1.34 9.185.533 1.775 1.825 3.173 2.99 4.556 1.117 1.354 2.63 2.308 4.17 3.11 1.352.638 2.81 1.06 4.283 1.326.597-.457 1.653-2.156 2.584-1.44.045.806-1.85 1.684-.09 1.595 1.035-.312 1.752.8 2.603-.204.785.93 3.26-.593 2.703 1.306-.755.487-1.856.193-2.612.863-1.247-.623-2.24.557-3.62.408-1.533.275-3.092.385-4.646.387-2.55-.2-5.153-.286-7.578-1.174-1.367-.397-2.7-1.175-3.9-1.954zm2.153.933c1.334.576 2.64 1.184 4.1 1.368 2.32.322 4.715.82 7.043.366-1.054-.476-2.143.185-3.193-.34-1.26.27-2.6-.07-3.9-.237-1.455-.648-3.026-1.094-4.388-1.936-1.703-.622.88.798 1.34.913 1.064.604-1.17-.3-1.486-.56-.892-.5-1.005-.396-.088.112l.56.314zm-2.54-1.794c1.293.48-.006-.91-.597-.83-.262-.455-1.003-.743-.48-.987-.94.326-.984-1.24-1.425-1.016-.994-.314-.387-1.426-1.57-2.11-.108-.72-1.176-1.343-1.516-2.428-.15-.556-1.207-2.15-.558-.666.552 1.43 1.524 2.653 2.334 3.875.628 1.164 1.37 2.38 2.514 3.107.386.37.758.937 1.302 1.053zm-3.724-4.09c.045-.195.236.422 0 0zm5.273 4.663c.286-.128-.412-.162 0 0zm.7.256c-.073-.353-.32.198 0 0zm.88.366c.418-.398-.645-.25 0 0zm1.506.84c.254-.375-.813-.14 0 0zm-2.89-2.015c.65-.42-.84-.006 0 0zm.66.33c-.02-.222-.235.1 0 0zm3.293 2.056c.53.334 3.092.732 1.488.137-.27.056-2.975-.766-1.488-.137zm-5.228-4.072c-.05-.222-.822-.246 0 0zm1.533.894c.4-.28-.828-.215 0 0zm1.3.8c.573-.216-.928-.217 0 0zM9.02 23.665c.62.476 2.506.06.95-.284-.707-.377-2.3-.635-1.214.227l.263.057zm4.32 2.637c.26-.44-1.086-.252 0 0zm-1.313-1.043c1.52.43-1.277-.96-.375-.16l.2.09.175.068zm2.632 1.52c1.44.014-1.3-.2 0 0zm-6.193-3.947c-.056-.268-.355.022 0 0zm8.627 5.312c.038-.484-.47.36 0 0zm-6.17-3.81c-.087-.255-.45-.01 0 0zm-2.32-1.67c.826-.05-1.13-.364 0 0zM5.856 20.89c-.103-.396-.898-.712 0 0zm7.212 4.577c-.15-.173-.07.037 0 0zm4.488 2.755c-.014-.264-.244.1 0 0zm-4.885-3.165c.08-.34-.705-.103 0 0zm-3.344-2.12c.615-.065-.985-.415 0 0zm5.656 3.515c.958-.38-.933-.185 0 0zm-2.942-1.997c1.103.142-1.313-.75-.243-.08l.243.08zm3.835 2.358c1.03-.615.69 1.443 1.748.174 1.043-.762-.9.942.384.136.93-.622 2.303.295 3.17.593.624-.03 1.23.54 1.87.193 1.23-.332-2.408-.492-1.454-1.08-1.126.328-1.958-.39-2.513-1.112-1.264-.292-2.724-.938-3.355-2.056-.257-.42.37.06-.222-.627-.76-.677-1.14-1.446-1.652-2.27-.61-.325-.683-1.284-.744-.032.005-.79-.737-1.323-.92-1.102-.003-.76.795-.38.236-.942-.12-.79-.516-1.61-.634-2.502-.185-.43-.026-1.35-.63-.377-.22 1.027-.073-1.262.27-.508.45-.77-.162-.68-.186-.573.293-.65.186-1.572-.077-1.22.156-.69.247-2.535-.233-2.208.29-.72.552-3.297-.712-2.315-.512.007-1.398.186-1.817.394 1.313.724-.132.262-.668.146-.07.67-.6.38-1.26.387 1.058.13-.515 1.08-1.12.712-.788.376.68 1.316.015 1.607.082.437-1.207-.158-1.106.854-.764-.322-.105 1.2.278.685 1.3.352.915 1.154.948 1.917-.212.444-1.046-1.044-.186-.975-.68-1.103-.75-.4-1.315.114-.13.037 1.44.73.454 1.07.867.134.892.893 1.068 1.372.52.543.413-.6 1.037.053-.395-.58-2.09-1.637-.725-1.3-.007-.584-.247-1.056.172-1.045.415-.75-.434 1.85.5.896.258-.113.323-.75.787.06.674.664.244 1.144-.708.536.17.578 1.273.784 1.065 1.687.22.795.527.502.795.456.2.772.33.204.34-.163.962.206.736.775 1.038 1.172.663.3-.95-2.028.19-.7 1.197 1.08.45 1.533-.625 1.36.68-.055.9.92 1.75.885.776.37 1.3 1.787-.036 1.196-.463-.418-2.106-.934-.764-.14 1.238.574 2.222.916 3.416 1.637.854.6 1.223 1.308 1.547 1.447-.718.343-2.164-.274-1.1-.463-.67-.122-1.424-.46-.782.374.546.456 1.933.408 2.182.46-.21.464-.573.5.008.537-.648.346.208.4.268.597zm-1.326-3.744c-.395-.413-.497-1.185-.07-.513.22.088.7 1.263.07.513zM18.87 25.8c.246-.016.007.187 0 0zm-4.94-3.755c-.016-.624.142.48 0 0zm-.43-.577c-.497-.96.625.27 0 0zm-5.202-3.6c.292-.078.144.498 0 0zm4.14 2.244c.18-.673.2.564 0 0zm-2.925-2.034c-.206-.37.43.348 0 0zm2.51.804c-.47-1.053.334-.575.105.172l-.105-.172zm-4.328-2.886c-.2-.346-.557-1.36-.445-1.67.1.504 1.072 2.17.476.7-.658-1.24.787.402.936.712.07.307-.406-.084-.084.638-.588-.822-.347.454-.882-.37zm-1.337-.922c.055-.804.306.55 0 0zm.602.208c.287-.606.486.845 0 0zM5.5 14.182c-.498-.495-.858-.95.024-.307.34.013-.755-1.037.082-.334.88.16.434 1.443-.105.64zm.76-.02c.29-.287.154.282 0 0zm.468.15c-.44-.822.532.345 0 0zm-.93-.888c-1.448-1.29 1.82.673.236.24l-.236-.24zm4.148 2.41c-.627-.375-.167-2.644.047-1.093.61-.197-.034.802.42.792-.07.63-.275.857-.467.3zm1.534.907c.06-.684.13.468 0 0zm-.266-.264c.07-.292.006.344 0 0zM6.092 13c-.93-1.283 2.703 1.298.596.325-.22-.058-.485-.078-.596-.325zm2.955 1.566c-.088-1.08.196.18 0 0zm2.243 1.44c.173-.615.013.407 0 0zM6.235 12.51c.553-.118 2.3.97.695.31-.177-.196-.556-.107-.695-.31zm4.746 2.366c.06-1.105.33-.66.002.16l-.002-.16zm-4.335-2.75c.226-.33-.598-1.493.118-.417.3.246.897.412.38.516.815.72-.2.195-.497-.1zm4.1 2.406c.155-1.26.137.737 0 0zm-4.57-3.568c.172-.074.09.23 0 0zm1.07.637c.275-.578.508.644 0 0zm3.017 1.678c-.002-.22.057.323 0 0zm-.175-.386c-.418-1.033.4.547 0 0zm-.257-.678c-.07-.427.24.536 0 0zm.418-.68c-.288-.506.363-2.23.436-1.16-.303.834-.087 1.3.123.18.39-.88-.084 1.737-.56.98zm.43-2.566c.125-.154.028.185 0 0zM9.96 23.12c-.17-.15.022.094 0 0zm1.48.748c.823.212.82-.128.075-.23-.4-.372-1.662-.767-.532-.046.074.2.31.185.457.275zm-2.92-1.94c.453.34 1.707.958.646.13.358-.416-.685-.638-.34-.916-.88-.54-.695-.5-.078-.473-1.058-.473.153-.437.096-.68-.408-.08-2.026-.72-1.074.052-.968-.493-.23.184-.523.113-1-.27.88.754-.157.5.567.45 1.528 1.153.24.476-.17.244.922.615 1.2.8zm1.547.89c1.88.606-.923-.74 0 0zm7.92 4.798c.024-.374-.257.32 0 0zm.814.343c.434-.42.018.67.72-.103.007-.553-.02-.88-.806-.208-.217.12-.313.63.087.31zM5.878 19.84c-.133-.524-.934-.522 0 0zm.87.57c-.323-.535-1.152-.485 0 0zm4.946 2.983c.483.43 2.218.315.586.053-.24-.357-1.533-.27-.586-.053zm6.798 4.2c.743-.624-.72.278 0 0zm1.546 1.062c.005-.2-.32.087 0 0zm.003-.28c.823-.87-.797.05 0 0zM3.74 18.05c-.7-1-.436-1.45-1.112-2.267-.128-.625-1.16-2.043-.534-.54.574.88.744 2.24 1.646 2.81zm16.04 10.046c1.515-.978-.62-.426 0 0zm1.156.453c.76-.65-.48-.136 0 0zM5.62 18.735c.217-.323-.56-.042 0 0zm15.075 9.505c.734-.473-.17-.4-.133.043l.133-.043zm-9.962-6.28c-.025-.32-.388.027 0 0zm.615.354c-.196-.396-.3.062 0 0zm10.525 6.245c.94-.68-.57-.13-.197.13l.197-.13zm-.36-.174c.767-.642-.81.284 0 0zm1.84 1.225c.514-.344-.625-.11 0 0zm-17.26-11.11c.69.154 2.755 1.698 1.537.107-.624-.185-.25-1.71-.887-1.44.427.714.35 1.018-.546.568-1.127-.55-.633.272-.413.5-.3.07.397.26.31.266zm-3.14-2.48c.123-.51-1.137-2.81-.595-1.152.195.347.175 1.005.595 1.152zm5.766 3.555c-.356-.297-.017-.042 0 0zm.874.204c0-.54-.966-.22 0 0zm7.577 4.776c-.145-.37-.57-.008 0 0zm.364.266c-.054-.207-.2.04 0 0zm3.003 1.892c.29-.213-.36-.028 0 0zM4.52 16.422c.826-.32-.885-.228 0 0zM16.5 23.97c-.01-.535-.527.133 0 0zM4.193 15.66c.53-.18-.49-.118 0 0zm1.54.746c-.01-.176-.163.067 0 0zm18.788 11.52c.682-.138 2.238.347 2.49-.18-.83-.02-2.867-.585-2.963.134l.18.03.293.018zM6.223 16.53c.012-.542-.422-.02 0 0zm-4.05-2.81c-.184-1.032-.7-.156 0 0zm.965.243c.012-.332-.884-.298 0 0zm.552.27c-.16-.13-.124.163 0 0zm3.473 2.227c.164-.15-.387-.11 0 0zm-3.84-2.84c-.094-.78-1.12-.117 0 0zm-1.98-1.285c-.028-.36-.193.136 0 0zm.295-.222c-.048-.427-.253.054 0 0zm1.627.97c.688-.27-1.253-.56-.14-.05l.14.05zM25.043 26.54c.44-.404-.56-.125 0 0zm2.63 1.363c.177-.52-.445.07 0 0zM3.43 12.235c.073-.505-.546.1 0 0zm-2.316-1.55C.992 9.97 1.01 8.72 2.198 9.142c-1.587.316 1.1 1.974.76.664.668.033 1.306-.395.955.253C5.23 9.916 6.14 8.774 7.412 8.935c1-.132 2.072-.23 3.14-.63.877-.063 1.72-1.007 1.24-1.567-1.196-.1-2.448.048-3.77.312-1.465.304-2.795.883-4.273 1.13-1.44.194.29.533-.123.61-.75.26.897.436-.097.712-.614-.117-1.253-.328-.99-.975-1.38.18-2.593.752-1.502 2.156l.08.001zM4.442 9c.323-1.192 1.733.98.53.16-.143-.108-.38-.195-.53-.16zm.063-.578c.467-.347.248.195 0 0zm.593.01c.043-.548 1.358.3.217.197l-.217-.197zm.81-.326c.297-.347.086.307 0 0zm.208-.14c.494-.593 2.793-.38 1.1-.058-.45-.34-.797.2-1.1.058zm3-.463c-.074-1.62 1.492.575 0 0zm.852-.005c.31-.816 1.21-.328.145-.164.023.087-.032.422-.145.164zm-6.873 4.327c.93-.57-.987-.494 0 0zm.688.2c.326-.347-.7-.14 0 0zM1.757 10.57c.53-.41-.63-.155 0 0zm27.47 17.185c.015-.474-.406.213 0 0zm-2.79-1.905c.08-.545-.36.047 0 0zm3.56 2.09c.743.003 2.252-.23.635-.23-.254.04-1.48.03-.635.23zM4.39 11.673c.602-.04.94-.663-.117-.628-1.64-.17 1.446.562-.2.352-.222.147.314.316.327.275zm.53.268c-.063-.386-.186.205 0 0zm.63-1.676c.26-.324-.36-.087 0 0zm-2-3.344c1.074-.365 2.542-.775 3.05.18-.516-.62-.208-1.232.28-.324.69.918 1.034-.418.586-.726.51.634 1.09.934.342.04.815-.98-1.63.128-2.186.117-.267.12-2.76.636-2.07.713zm.63-1.205c.612-.462 2.118.275 1.152-.46-.095-.083-2.115.557-1.152.46zm2.232.092c.716.018-.31-.963.544-.518-.14-.458-.994-.543-1.412-.727-.236.418.48 1.25.867 1.245zm-1.84-2.026c.248-.336-.435.17 0 0zM5.48 4c1.155-.153-.294-.497-.233-.012L5.48 4zM3.776 2.67c-.813-1.062 1.53.178.703-.933-.696-.553-1.363.624-.703.933zm10.434 5.62c.373-.66-1.54-.89-.25-.234.118.04.092.28.25.234z"/></svg>

        devcontainer.json
        -----------------
        {
            "image": "mcr.microsoft.com/devcontainers/universal:2",
            "hostRequirements": {
              "cpus": 4
            },
            "waitFor": "onCreateCommand",
            "updateContentCommand": "pip install -r requirements.txt",
            "postCreateCommand": "",
            "postAttachCommand": {
              "server": "flask --debug run"
            },
            "portsAttributes": {
              "5000": {
                "label": "Application",
                "onAutoForward": "openPreview"
              }
            },
            "customizations": {
              "codespaces": {
                "openFiles": [
                  "templates/index.html"
                ]
              },
              "vscode": {
                "extensions": [
                  "ms-python.python"
                ]
              }
            },
            "forwardPorts": [5000]
          }

    templates/
        login.html
        ----------
        <!DOCTYPE html>
        <html lang="ko">
        <head>
           <meta charset="UTF-8">
           <title>로그인</title>
           <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
        </head>
        <body>
           <div class="form-container">
               <h1>SSAT 출제 시스템</h1>
               <h1>로그인</h1>
        
        
               {% with messages = get_flashed_messages(with_categories=true) %}
                   {% if messages %}
                       <ul class="flashes">
                           {% for category, message in messages %}
                               <li class="{{ category }}">{{ message }}</li>
                           {% endfor %}
                       </ul>
                   {% endif %}
               {% endwith %}
        
        
               <form action="{{ url_for('login') }}" method="POST">
                   <label>사용자 ID: <input type="text" name="user_id" required></label><br>
                   <label>비밀번호: <input type="password" name="password" required></label><br>
                   <input type="submit" value="로그인">
               </form>
               <p class="switch-form">계정이 없으신가요? <a href="{{ url_for('register') }}">회원가입</a></p>
           </div>
        </body>
        </html>

        index.html
        ----------
        <!DOCTYPE html>
        <html lang="ko">
        
        <head>
            <meta charset="UTF-8">
            <title>문제를 출제 해 주세요.</title>
            <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
            <script>
        
                function showForm() {
                    const selectedType = document.querySelector('input[name="question_type"]:checked');
                    if (!selectedType) return; // 라디오 버튼이 선택되지 않은 경우 함수 종료
                    const type = selectedType.value;
                    const multipleChoice = document.getElementById('multiple_choice');
                    const subjective = document.getElementById('subjective');
                    const fillInTheBlank = document.getElementById('fill_in_the_blank');
        
                    multipleChoice.style.display = type === 'multiple' ? 'block' : 'none';
                    subjective.style.display = type === 'subjective' ? 'block' : 'none';
                    fillInTheBlank.style.display = type === 'fill_in_the_blank' ? 'block' : 'none';
        
                    document.getElementsByName('mc_question')[0].disabled = type !== 'multiple';
                    document.getElementsByName('mc_choices[]').forEach(field => field.disabled = type !== 'multiple');
                    document.getElementsByName('mc_answers[]').forEach(field => field.disabled = type !== 'multiple');
                    document.getElementsByName('sub_question')[0].disabled = type !== 'subjective';
                    document.getElementsByName('sub_answer')[0].disabled = type !== 'subjective';
                    document.getElementsByName('fib_question')[0].disabled = type !== 'fill_in_the_blank';
                    document.getElementsByName('fib_answer[]').forEach(field => field.disabled = type !== 'fill_in_the_blank');
                }
        
                let originalBlanks = [];
                let previousAnswers = [];
                let initialQuestion = '';
        
                function generateAnswerFields() {
                    const textarea = document.getElementsByName('fib_question')[0];
                    const question = textarea.value;
                    const blankMatches = question.match(/{\s*}/g) || [];
                    const blanks = blankMatches.map(blank => blank.length - 2); // 원래 공백 수 저장
                    const answerDiv = document.querySelector('#fib_answers');
        
                    // 기존 매핑을 저장
                    const existingAnswers = Array.from(document.getElementsByName('fib_answer[]')).map(input => input.value);
        
                    // 매핑을 유지하며 삭제된 blank에 대응하는 정답 제거
                    previousAnswers = previousAnswers.filter((_, index) => index < blanks.length);
        
                    if (answerDiv) {
                        answerDiv.innerHTML = '';
                        let updatedQuestion = question;
                        let currentAnswerIndex = 0;
        
                        for (let i = 0; i < blanks.length; i++) {
                            const label = document.createElement('label');
                            label.innerText = `Blank#${i + 1}: `;
                            const input = document.createElement('input');
                            input.type = 'text';
                            input.name = 'fib_answer[]';
                            input.required = true;
                            if (previousAnswers[currentAnswerIndex] !== undefined) {
                                input.value = previousAnswers[currentAnswerIndex];
                            } else if (existingAnswers[currentAnswerIndex] !== undefined) {
                                input.value = existingAnswers[currentAnswerIndex];
                            }
                            currentAnswerIndex++;
                            answerDiv.appendChild(label);
                            answerDiv.appendChild(input);
                            answerDiv.appendChild(document.createElement('br'));
        
                            updatedQuestion = updatedQuestion.replace(/{\s*}/, `{Blank#${i + 1}}`);
                        }
        
                        originalBlanks = blanks;
                        initialQuestion = textarea.value;
                        textarea.value = updatedQuestion;
                        document.querySelector('button[onclick="generateAnswerFields()"]').disabled = true; // 버튼 비활성화
                    } else {
                        console.error("Element with id 'fib_answers' not found.");
                    }
                }
        
                function resetBlanks() {
                    const textarea = document.getElementsByName('fib_question')[0];
                    let i = 0;
                    textarea.value = textarea.value.replace(/{Blank#\d+}/g, (match) => {
                        const blankCount = originalBlanks[i++];
                        return `{${' '.repeat(blankCount)}}`;
                    });
                    document.querySelector('button[onclick="generateAnswerFields()"]').disabled = false; // 버튼 활성화
                }
        
                function enableGenerateButton() {
                    const textarea = document.getElementsByName('fib_question')[0];
                    if (textarea.value === initialQuestion) {
                        document.querySelector('button[onclick="generateAnswerFields()"]').disabled = true;
                    } else {
                        document.querySelector('button[onclick="generateAnswerFields()"]').disabled = false;
                    }
                }
        
                document.addEventListener('DOMContentLoaded', () => {
                    showForm();
                    const textarea = document.getElementsByName('fib_question')[0];
                    textarea.addEventListener('focus', resetBlanks);
                    textarea.addEventListener('input', enableGenerateButton);
                });
        
                function updateAnswerOptions() {
                    const choices = document.getElementsByName('mc_choices[]');
                    const answerDiv = document.getElementById('mc_answers');
                    answerDiv.innerHTML = '<h4>정답</h4>';
        
        
                    choices.forEach((choice, index) => {
                        if (choice.value.trim() !== '') {
                            const label = document.createElement('label');
                            label.style.marginRight = '10px';
                            label.innerHTML = `<input type="checkbox" name="mc_answers[]" value="${index + 1}"> ${index + 1}`;
                            answerDiv.appendChild(label);
                        }
                    });
                }
        
        
                function addChoice() {
                    const choicesDiv = document.getElementById('choices');
                    const choiceCount = choicesDiv.getElementsByTagName('label').length + 1;
                    const newChoice = document.createElement('div');
                    newChoice.innerHTML = `<label>${choiceCount}. <textarea name="mc_choices[]" rows="3" oninput="updateAnswerOptions()"></textarea></label><br>`;
                    choicesDiv.appendChild(newChoice);
                    updateAnswerOptions();
                }
        
        
                function removeChoice() {
                    const choicesDiv = document.getElementById('choices');
                    const choices = choicesDiv.getElementsByTagName('div');
                    if (choices.length > 2) {
                        choicesDiv.removeChild(choices[choices.length - 1]);
                        updateAnswerOptions();
                    }
                }
        
        
                function openPopup() {
                    document.getElementById('voc-popup').style.display = 'block';
                    document.getElementById('voc-popup-overlay').style.display = 'block';
                }
        
        
                function closePopup() {
                    document.getElementById('voc-popup').style.display = 'none';
                    document.getElementById('voc-popup-overlay').style.display = 'none';
                }
        
        
                function loadCategories() {
                    fetch('/categories')
                        .then(response => response.json())
                        .then(data => {
                            const mainCategorySelect = document.getElementById('main_category');
                            mainCategorySelect.innerHTML = '<option value="">대분류 선택</option>';
                            data.categories.forEach(category => {
                                const option = document.createElement('option');
                                option.value = category.name;
                                option.text = category.name;
                                mainCategorySelect.appendChild(option);
                            });
        
        
                            const lastMainCategory = '{{ request.cookies.get("last_main_category", "") }}';
                            const lastSubCategory = '{{ request.cookies.get("last_sub_category", "") }}';
                            const lastMinorCategory = '{{ request.cookies.get("last_minor_category", "") }}';
        
        
                            if (lastMainCategory) {
                                mainCategorySelect.value = lastMainCategory;
                                updateSubcategories(() => {
                                    const subCategorySelect = document.getElementById('sub_category');
                                    if (lastSubCategory) {
                                        subCategorySelect.value = lastSubCategory;
                                        updateMinorCategories(() => {
                                            const minorCategorySelect = document.getElementById('minor_category');
                                            if (lastMinorCategory) {
                                                minorCategorySelect.value = lastMinorCategory;
                                            }
                                        });
                                    }
                                });
                            }
                        });
                }
        
        
                function updateSubcategories(callback) {
                    const mainCategory = document.getElementById('main_category').value;
                    fetch('/categories')
                        .then(response => response.json())
                        .then(data => {
                            const subCategorySelect = document.getElementById('sub_category');
                            subCategorySelect.innerHTML = '<option value="">중분류 선택</option>';
                            const minorCategorySelect = document.getElementById('minor_category');
                            minorCategorySelect.innerHTML = '<option value="">소분류 선택</option>';
                            const category = data.categories.find(category => category.name === mainCategory);
                            if (category) {
                                category.subcategories.forEach(subcategory => {
                                    const option = document.createElement('option');
                                    option.value = subcategory.name;
                                    option.text = subcategory.name;
                                    subCategorySelect.appendChild(option);
                                });
                            }
                            if (callback) callback();
                        });
                }
        
        
                function updateMinorCategories(callback) {
                    const mainCategory = document.getElementById('main_category').value;
                    const subCategory = document.getElementById('sub_category').value;
                    fetch('/categories')
                        .then(response => response.json())
                        .then(data => {
                            const minorCategorySelect = document.getElementById('minor_category');
                            minorCategorySelect.innerHTML = '<option value="">소분류 선택</option>';
                            const category = data.categories.find(category => category.name === mainCategory);
                            if (category) {
                                const subcategory = category.subcategories.find(sub => sub.name === subCategory);
                                if (subcategory) {
                                    subcategory.subcategories.forEach(minor => {
                                        const option = document.createElement('option');
                                        option.value = minor.name;
                                        option.text = minor.name;
                                        minorCategorySelect.appendChild(option);
                                    });
                                }
                            }
                            if (callback) callback();
                        });
                }
        
        
                function validateForm(event) {
                    const questionType = document.querySelector('input[name="question_type"]:checked').value;
                    if (questionType === 'multiple') {
                        const answers = document.querySelectorAll('input[name="mc_answers[]"]:checked');
                        if (answers.length === 0) {
                            event.preventDefault();
                            alert('객관식 문제의 경우, 적어도 하나의 정답을 선택해야 합니다.');
                        }
                    }
                }
        
        
                document.addEventListener('DOMContentLoaded', () => {
                    loadCategories();
                    document.getElementById('main_category').addEventListener('change', () => updateSubcategories());
                    document.getElementById('sub_category').addEventListener('change', () => updateMinorCategories());
                    document.querySelector('form').addEventListener('submit', validateForm);
                    showForm();
                });
            </script>
            <style>
                .popup {
                    display: none;
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 40%;
                    background-color: white;
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                    padding: 20px;
                    z-index: 1000;
                    border-radius: 8px;
                }
        
        
                .popup-overlay {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.7);
                    z-index: 999;
                }
        
        
                .popup-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }
        
        
                .popup-header h2 {
                    margin: 0;
                }
        
        
                .popup-header .close {
                    cursor: pointer;
                    font-size: 1.5em;
                }
        
        
                #feedback-button,
                #download-users-button {
                    position: fixed;
                    bottom: 20px;
                    padding: 10px 20px;
                    background-color: #007bff;
                    color: white;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                }
        
        
                #feedback-button:hover,
                #download-users-button:hover {
                    background-color: #0056b3;
                }
        
        
                #feedback-button {
                    right: 20px;
                }
        
        
                #download-users-button {
                    right: 220px;
                }
        
        
                body {
                    padding: 0 10%;
                }
        
        
                textarea {
                    resize: vertical;
                }
        
        
                .title-container {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    margin-bottom: 20px;
                }
        
        
                .title-container h2 {
                    margin: 0;
                }
        
        
                .title-container .download-btn {
                    margin-left: 10px;
                }
        
        
                .admin-btns {
                    display: flex;
                    justify-content: center;
                    margin-bottom: 20px;
                }
        
        
                .admin-btns .download-btn {
                    margin: 0 10px;
                }
        
        
                .questions-list {
                    max-width: 800px;
                    margin: 0 auto;
                }
        
        
                .form-container {
                    max-width: 800px;
                    margin: 0 auto;
                }
        
        
                #mc_answers label {
                    display: inline-block;
                    margin-right: 10px;
                }
        
        
                .chart-container {
                    margin-top: 40px;
                    text-align: center;
                }
        
        
                .chart-title {
                    text-align: center;
                    margin-bottom: 20px;
                }
                #inputArea {
                    /* width: 100%; */
                    height: 100px;
                }
                #preview img {
                    margin-top: 10px;
                    max-width: 300px;  /* 이미지의 최대 너비를 100px로 설정 */
                    max-height: 300px; /* 이미지의 최대 높이를 100px로 설정 */
                }
            </style>
        </head>
        
        <body>
            <h1 id="main-title">SSAT 출제 시스템</h1>
            <h1>문제를 출제 해 주세요.</h1>
        
        
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <ul class="flashes">
                {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
            </ul>
            {% endif %}
            {% endwith %}
        
        
            <p>환영합니다, {{ user.id }}님! <a href="{{ url_for('logout') }}">로그아웃</a> | <a
                    href="{{ url_for('change_password') }}">비밀번호 변경</a></p>
        
        
            {% if user.id == 'admin' %}
            <p><a href="{{ url_for('manage_categories') }}">분류 관리</a></p>
            {% endif %}
        
        
            <form action="/submit" method="POST" class="form-container">
                <label>
                    <input type="radio" name="question_type" value="multiple" onclick="showForm()" {% if last_type=='multiple'
                        or last_type is none %}checked{% endif %}> 객관식
                </label>
                <label>
                    <input type="radio" name="question_type" value="subjective" onclick="showForm()" {% if
                        last_type=='subjective' %}checked{% endif %}> 주관식
                </label>
                <label>
                    <input type="radio" name="question_type" value="fill_in_the_blank" onclick="showForm()" {% if
                        last_type=='fill_in_the_blank' %}checked{% endif %}> 빈칸 채우기
                </label>
        
        
        
                <h1>Paste Image in Text Area</h1>
                <textarea id="inputArea" placeholder="Paste text or image here..."></textarea>
                <div id="preview"></div>
            
                <script>
                    document.getElementById('inputArea').addEventListener('paste', function (event) {
                        const items = (event.clipboardData || event.originalEvent.clipboardData).items;
                        for (const item of items) {
                            if (item.kind === 'file' && item.type.startsWith('image/')) {
                                const blob = item.getAsFile();
                                const reader = new FileReader();
                                reader.onload = function (event) {
                                    const img = document.createElement('img');
                                    img.src = event.target.result;
                                    document.getElementById('preview').appendChild(img);
                                };
                                reader.readAsDataURL(blob);
                            }
                        }
                    });
                </script>
        
        
                <div id="multiple_choice"
                    style="display: {% if last_type == 'multiple' or last_type is none %}block{% else %}none{% endif %};">
                    <h3>객관식 문제</h3>
                    <div id="question">
                        <label for="mc_question">문제:</label>
                    </div>
                    <div id="question">
                        <textarea name="mc_question" id="mc_question" rows="3" required></textarea>
                    </div>
                    <div id="choices">
                        <div><label>1. <textarea name="mc_choices[]" rows="3" oninput="updateAnswerOptions()"
                                    required></textarea></label><br></div>
                        <div><label>2. <textarea name="mc_choices[]" rows="3" oninput="updateAnswerOptions()"
                                    required></textarea></label><br></div>
                        <div><label>3. <textarea name="mc_choices[]" rows="3" oninput="updateAnswerOptions()"
                                    required></textarea></label><br></div>
                        <div><label>4. <textarea name="mc_choices[]" rows="3" oninput="updateAnswerOptions()"
                                    required></textarea></label><br></div>
                    </div>
                    <button type="button" onclick="addChoice()">보기 추가</button>
                    <button type="button" onclick="removeChoice()">보기 제거</button><br>
                    <div id="mc_answers">
                        <h4>정답</h4>
                    </div>
                </div>
        
        
                <div id="subjective" style="display: {% if last_type == 'subjective' %}block{% else %}none{% endif %};">
                    <h3>주관식 문제</h3>
                    <label>문제: <textarea name="sub_question" rows="3" required></textarea></label><br>
                    <label>정답: <textarea name="sub_answer" rows="3" required></textarea></label><br>
                </div>
        
                <div id="fill_in_the_blank" style="display: {% if last_type == 'fill_in_the_blank' %}block{% else %}none{% endif %};">
                    <h3>빈칸 채우기 문제</h3>
                    <label>문제:  (작성예: 한국의 수도는{ }이고, 미국의 수도는 { }이다.)<textarea name="fib_question" rows="3" required></textarea></label><br>
                    <button type="button" onclick="generateAnswerFields()">정답 입력</button><br><br>
                    <div id="fib_answers"></div>
                    <div id="other_choices">
                        <h4>오답 보기 추가 (선택)</h4>
                        <div>
                            <textarea name="fib_others[]" rows="2"></textarea>
                        </div>
                    </div>
                    <button type="button" onclick="addChoice()">보기 추가</button>
                    <button type="button" onclick="removeChoice()">보기 삭제</button><br>
                </div>
                
                <script>
                    function addChoice() {
                        const otherChoicesDiv = document.getElementById('other_choices');
                        const newChoice = document.createElement('div');
                        newChoice.innerHTML = `<textarea name="fib_others[]" rows="2"></textarea>`;
                        otherChoicesDiv.appendChild(newChoice);
                    }
                
                    function removeChoice() {
                        const otherChoicesDiv = document.getElementById('other_choices');
                        const choices = otherChoicesDiv.getElementsByTagName('div');
                        if (choices.length > 1) {
                            otherChoicesDiv.removeChild(choices[choices.length - 1]);
                        }
                    }
                </script>
        
                <h3>분류</h3>
                <label>대분류:
                    <select id="main_category" name="main_category">
                        <option value="">대분류 선택</option>
                    </select>
                </label><br>
                <label>중분류:
                    <select id="sub_category" name="sub_category">
                        <option value="">중분류 선택</option>
                    </select>
                </label><br>
                <label>소분류:
                    <select id="minor_category" name="minor_category">
                        <option value="">소분류 선택</option>
                    </select>
                </label><br>
        
        
                <label>출처: <input type="text" name="source" value="{{ request.cookies.get('last_source', '') }}"></label><br>
                <label>태그: <textarea name="tags" rows="3">{{ last_tags }}</textarea></label><br>
        
        
                <input type="submit" value="제출">
            </form>
        
        
            <button id="feedback-button" onclick="openPopup()">기능제안 및 버그신고</button>
            {% if user.id == 'admin' %}
            <button id="download-users-button" onclick="window.location.href='{{ url_for('download_users') }}'">USER 목록
                다운로드</button>
            {% endif %}
        
        
            <div id="voc-popup" class="popup">
                <div class="popup-header">
                    <h2>기능제안 및 버그신고</h2>
                    <span class="close" onclick="closePopup()">&times;</span>
                </div>
                <form action="/submit_voc" method="POST" class="voc-container">
                    <label for="voc_type">유형:</label>
                    <select id="voc_type" name="voc_type" required>
                        <option value="Feature Suggestion">기능 제안</option>
                        <option value="Bug Report">버그 신고</option>
                    </select><br>
                    <label for="voc_content">내용:</label>
                    <textarea id="voc_content" name="voc_content" rows="4" required></textarea><br>
                    <input type="submit" value="제출">
                </form>
                {% if user.id == 'admin' %}
                <a href="{{ url_for('download_voc') }}" class="download-btn" style="float: right;">VOC JSON 다운로드</a>
                {% endif %}
            </div>
            <div id="voc-popup-overlay" class="popup-overlay" onclick="closePopup()"></div>
        
        
            <div class="container">
                <div class="title-container">
                    <h2>문제 목록</h2>
                    {% if user.id == 'admin' %}
                    <a href="{{ url_for('download') }}" class="download-btn">JSON 다운로드</a>
                    {% endif %}
                </div>
                <div class="question-count">문제 수: {{ questions | length }}</div> <br> <!-- 문제 수 표시 -->
                <div class="questions-list">
                    {% if questions %}
                    {% for question in questions %}
                    <div class="question">
                        <p><strong>ID:</strong> {{ question.ID }}</p>
                        <p><strong>유형:</strong> {{ question.Type }}</p>
                        <p><strong>문제:</strong> {{ question.Question }}</p>
                        {% if question.Choices %}
                        <p><strong>보기:</strong></p>
                        <ul>
                            {% for choice in question.Choices %}
                            <li>{{ choice }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        <p><strong>정답:</strong>
                            {% if question.Type == 'fill_in_the_blank' %}
                        <ul>
                            {% if question.Answers is mapping %}
                            {% for key, value in question.Answers.items() %}
                            <li>{{ key }}: {{ value }}</li>
                            {% endfor %}
                            {% else %}
                            {% for answer in question.Answers %}
                            <li>{{ answer }}</li>
                            {% endfor %}
                            {% endif %}
                        </ul>
                        {% else %}
                        <ul>
                            {% for answer in question.Answers %}
                            <li>{{ answer }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        </p>
                        <p><strong>대분류:</strong> {{ question.Category.main if question.Category else '' }}</p>
                        <p><strong>중분류:</strong> {{ question.Category.sub if question.Category else '' }}</p>
                        <p><strong>소분류:</strong> {{ question.Category.minor if question.Category else '' }}</p>
                        <p><strong>태그:</strong> {{ question.Tags }}</p>
                        <p><strong>출처:</strong> {{ question.Source }}</p>
                        <p><strong>제출자 ID:</strong> {{ question.SubmitterID }}</p>
                        <p><strong>제출 시간:</strong> {{ question.SubmissionTime }}</p>
                        <p><strong>마지막 수정 시간:</strong> {{ question.LastModifiedTime }}</p>
                        <form action="{{ url_for('edit_question', question_id=question.ID) }}" method="GET"
                            style="display:inline;">
                            <button type="submit">수정</button>
                        </form>
                        <form action="{{ url_for('delete_question', question_id=question.ID) }}" method="POST"
                            style="display:inline;">
                            <button type="submit">삭제</button>
                        </form>
                        <hr>
                    </div>
                    {% endfor %}
                    {% else %}
                    <p>아직 제출된 질문이 없습니다.</p>
                    {% endif %}
                </div>
        
            </div>
        
        
            <div class="chart-container">
                <h2 class="chart-title">출제 현황 (Total: {{ total_questions }})</h2>
                <img src="data:image/png;base64,{{ chart_base64 }}" alt="출제 현황">
            </div>
        </body>
        
        </html>

        edit_question.html
        ------------------
        <!DOCTYPE html>
        <html lang="ko">
        
        <head>
            <meta charset="UTF-8">
            <title>문제 수정</title>
            <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
            <style>
                .form-container {
                    max-width: 800px;
                    margin: 20px auto;
                    padding: 20px;
                    border: 1px solid #ccc;
                    border-radius: 5px;
                    background-color: #fff;
                }
            </style>
            <script>
                function showForm() {
                    const type = document.querySelector('input[name="question_type"]:checked').value;
                    const multipleChoice = document.getElementById('multiple_choice');
                    const subjective = document.getElementById('subjective');
                    const fillInTheBlank = document.getElementById('fill_in_the_blank');
        
                    multipleChoice.style.display = type === 'multiple' ? 'block' : 'none';
                    subjective.style.display = type === 'subjective' ? 'block' : 'none';
                    fillInTheBlank.style.display = type === 'fill_in_the_blank' ? 'block' : 'none';
        
                    // if(type === 'fill_in_the_blank'){
                    //     resetBlanks()
                    //     generateAnswerFields()
                    // }
        
                    document.getElementsByName('mc_question')[0].disabled = type !== 'multiple';
                    document.getElementsByName('mc_choices[]').forEach(field => field.disabled = type !== 'multiple');
                    document.getElementsByName('mc_answers[]').forEach(field => field.disabled = type !== 'multiple');
                    document.getElementsByName('sub_question')[0].disabled = type !== 'subjective';
                    document.getElementsByName('sub_answer')[0].disabled = type !== 'subjective';
                    document.getElementsByName('fib_question')[0].disabled = type !== 'fill_in_the_blank';
                    document.getElementsByName('fib_answer[]').forEach(field => field.disabled = type !== 'fill_in_the_blank');
                }
        
                let originalBlanks = [];
                let previousAnswers = [];
                let initialQuestion = '';
        
                function generateAnswerFields() {
                    const textarea = document.getElementsByName('fib_question')[0];
                    const question = textarea.value;
                    const blankMatches = question.match(/{\s*}/g) || [];
                    const blanks = blankMatches.map(blank => blank.length - 2); // 원래 공백 수 저장
                    const answerDiv = document.querySelector('#fib_answers');
        
                    // 기존 매핑을 저장
                    const existingAnswers = Array.from(document.getElementsByName('fib_answer[]')).map(input => input.value);
                    // 매핑을 유지하며 삭제된 blank에 대응하는 정답 제거
                    previousAnswers = previousAnswers.filter((_, index) => index < blanks.length);
        
                    if (answerDiv) {
                        answerDiv.innerHTML = '';
                        let updatedQuestion = question;
                        let currentAnswerIndex = 0;
        
                        for (let i = 0; i < blanks.length; i++) {
                            const label = document.createElement('label');
                            label.innerText = `Blank#${i + 1}: `;
                            const input = document.createElement('input');
                            input.type = 'text';
                            input.name = 'fib_answer[]';
                            input.required = true;
                            if (previousAnswers[currentAnswerIndex] !== undefined) {
                                input.value = previousAnswers[currentAnswerIndex];
                            } else if (existingAnswers[currentAnswerIndex] !== undefined) {
                                input.value = existingAnswers[currentAnswerIndex];
                            }
                            currentAnswerIndex++;
                            answerDiv.appendChild(label);
                            answerDiv.appendChild(input);
                            answerDiv.appendChild(document.createElement('br'));
        
                            updatedQuestion = updatedQuestion.replace(/{\s*}/, `{Blank#${i + 1}}`);
                        }
        
                        originalBlanks = blanks;
                        initialQuestion = updatedQuestion;
                        textarea.value = updatedQuestion;
                        document.querySelector('button[onclick="generateAnswerFields()"]').disabled = true; // 버튼 비활성화
        
                
                    } else {
                        console.error("Element with id 'fib_answers' not found.");
                    }
                }
        
                function resetBlanks() {
                    const textarea = document.getElementsByName('fib_question')[0];
                    const blankMatches = textarea.value.match(/{\s*Blank#\d+\s*}|{\s*}/g) || [];
        
                    if (blankMatches.length === 0) {
                        // 빈칸이 하나도 없는 경우 버튼 비활성화
                        document.querySelector('button[onclick="generateAnswerFields()"]').disabled = true;
                    } else {
                        // 빈칸이 하나라도 있는 경우 버튼 활성화
                        textarea.value = textarea.value.replace(/{\s*Blank#\d+\s*}|{\s*}/g, (match) => {
                            let blankCount;
                            if (match.includes('Blank#')) {
                                const blankNumber = parseInt(match.match(/\d+/)[0], 10) - 1;
                                blankCount = originalBlanks[blankNumber];
                            } else {
                                blankCount = match.length - 2; // 중괄호를 제외한 공백 수
                            }
                            return `{${' '.repeat(blankCount)}}`;
                        });
                        document.querySelector('button[onclick="generateAnswerFields()"]').disabled = false; // 버튼 활성화
                    }
                }
        
        
                function enableGenerateButton() {
                    const textarea = document.getElementsByName('fib_question')[0];
                    if (textarea.value === initialQuestion) {
                        document.querySelector('button[onclick="generateAnswerFields()"]').disabled = true;
                    } else {
                        document.querySelector('button[onclick="generateAnswerFields()"]').disabled = false;
                    }
                }
        
                function updateAnswerOptions() {
                    const choices = document.getElementsByName('mc_choices[]');
                    const answerDiv = document.getElementById('mc_answers');
                    answerDiv.innerHTML = '<h4>정답</h4>';
        
        
                    choices.forEach((choice, index) => {
                        if (choice.value.trim() !== '') {
                            const label = document.createElement('label');
                            label.style.marginRight = '10px';
                            label.innerHTML = `<input type="checkbox" name="mc_answers[]" value="${index + 1}"> ${index + 1}`;
                            answerDiv.appendChild(label);
                        }
                    });
                }
        
                function isChecked(value) {
                    let answers = {{ question.Answers | default([]) | tojson }};
                    if (answers.length === 0 && '{{ question.Answer }}' !== '') {
                        answers = ['{{ question.Answer }}'];
                    }
                    return answers.includes(value.toString()) ? 'checked' : '';
                }
        
                function addChoice() {
                    const otherChoicesDiv = document.getElementById('other_choices');
                    const newChoice = document.createElement('div');
                    newChoice.innerHTML = `<textarea name="fib_others[]" rows="2"></textarea>`;
                    otherChoicesDiv.appendChild(newChoice);
                }
        
                function removeChoice() {
                    const otherChoicesDiv = document.getElementById('other_choices');
                    const choices = otherChoicesDiv.getElementsByTagName('div');
                    if (choices.length > 1) {
                        otherChoicesDiv.removeChild(choices[choices.length - 1]);
                    }
                }
        
                function loadCategories() {
                    fetch('/categories')
                        .then(response => response.json())
                        .then(data => {
                            const mainCategorySelect = document.getElementById('main_category');
                            mainCategorySelect.innerHTML = '<option value="">대분류 선택</option>';
                            data.categories.forEach(category => {
                                const option = document.createElement('option');
                                option.value = category.name;
                                option.text = category.name;
                                mainCategorySelect.appendChild(option);
                            });
        
                            const category = {
                                main: "{{ question.Category.main if question.Category else '' }}",
                                sub: "{{ question.Category.sub if question.Category else '' }}",
                                minor: "{{ question.Category.minor if question.Category else '' }}"
                            };
                            if (category.main) {
                                mainCategorySelect.value = category.main;
                                updateSubcategories(() => {
                                    const subCategorySelect = document.getElementById('sub_category');
                                    if (category.sub) {
                                        subCategorySelect.value = category.sub;
                                        updateMinorCategories(() => {
                                            const minorCategorySelect = document.getElementById('minor_category');
                                            if (category.minor) {
                                                minorCategorySelect.value = category.minor;
                                            }
                                        });
                                    }
                                });
                            }
                        });
                }
        
                function updateSubcategories(callback) {
                    const mainCategory = document.getElementById('main_category').value;
                    fetch('/categories')
                        .then(response => response.json())
                        .then(data => {
                            const subCategorySelect = document.getElementById('sub_category');
                            subCategorySelect.innerHTML = '<option value="">중분류 선택</option>';
                            const minorCategorySelect = document.getElementById('minor_category');
                            minorCategorySelect.innerHTML = '<option value="">소분류 선택</option>';
                            const category = data.categories.find(category => category.name === mainCategory);
                            if (category) {
                                category.subcategories.forEach(subcategory => {
                                    const option = document.createElement('option');
                                    option.value = subcategory.name;
                                    option.text = subcategory.name;
                                    subCategorySelect.appendChild(option);
                                });
                            }
                            if (callback) callback();
                        });
                }
        
                function updateMinorCategories(callback) {
                    const mainCategory = document.getElementById('main_category').value;
                    const subCategory = document.getElementById('sub_category').value;
                    fetch('/categories')
                        .then(response => response.json())
                        .then(data => {
                            const minorCategorySelect = document.getElementById('minor_category');
                            minorCategorySelect.innerHTML = '<option value="">소분류 선택</option>';
                            const category = data.categories.find(category => category.name === mainCategory);
                            if (category) {
                                const subcategory = category.subcategories.find(sub => sub.name === subCategory);
                                if (subcategory) {
                                    subcategory.subcategories.forEach(minor => {
                                        const option = document.createElement('option');
                                        option.value = minor.name;
                                        option.text = minor.name;
                                        minorCategorySelect.appendChild(option);
                                    });
                                }
                            }
                            if (callback) callback();
                        });
                }
        
                function validateForm(event) {
                    const questionType = document.querySelector('input[name="question_type"]:checked').value;
                    if (questionType === 'multiple') {
                        const answers = document.querySelectorAll('input[name="mc_answers[]"]:checked');
                        if (answers.length === 0) {
                            event.preventDefault();
                            alert('객관식 문제의 경우, 적어도 하나의 정답을 선택해야 합니다.');
                        }
                    }
                }
        
                document.addEventListener('DOMContentLoaded', () => {
                    window.question = {{ question | tojson | safe }};
                    initialQuestion = document.getElementsByName('fib_question')[0].value
                    enableGenerateButton()
                    loadCategories();
                    document.getElementById('main_category').addEventListener('change', () => updateSubcategories());
                    document.getElementById('sub_category').addEventListener('change', () => updateMinorCategories());
                    updateAnswerOptions();
                    showForm();
                    const textarea = document.getElementsByName('fib_question')[0];
                    textarea.addEventListener('focus', resetBlanks);
                    textarea.addEventListener('input', enableGenerateButton);
                    document.querySelector('form').addEventListener('submit', validateForm);
                });
            </script>
        </head>
        
        <body>
            <h1 id="main-title">SSAT 출제 시스템</h1>
            <h1>문제 수정</h1>
        
            <div class="form-container">
                <form action="/edit/{{ question.ID }}" method="POST">
                    <label>
                        <input type="radio" name="question_type" value="multiple" onclick="showForm()" {% if
                            question.Type=='multiple' %}checked{% endif %}> 객관식
                    </label>
                    <label>
                        <input type="radio" name="question_type" value="subjective" onclick="showForm()" {% if
                            question.Type=='subjective' %}checked{% endif %}> 주관식
                    </label>
                    <label>
                        <input type="radio" name="question_type" value="fill_in_the_blank" onclick="showForm()" {% if
                            question.Type=='fill_in_the_blank' %}checked{% endif %}> 빈칸 채우기
                    </label>
        
                    <div id="multiple_choice"
                        style="display: {% if question.Type == 'multiple' %}block{% else %}none{% endif %};">
                        <h3>객관식 문제</h3>
                        <label>문제: <textarea name="mc_question" rows="3" required>{{ question.Question }}</textarea></label><br>
                        <div id="choices">
                            {% if question.Choices %}
                            {% for choice in question.Choices %}
                            <div><label>{{ loop.index }}. <textarea name="mc_choices[]" rows="3" oninput="updateAnswerOptions()"
                                        required>{{ choice }}</textarea></label><br></div>
                            {% endfor %}
                            {% else %}
                            <div><label>1. <textarea name="mc_choices[]" rows="3" oninput="updateAnswerOptions()"
                                        required></textarea></label><br></div>
                            <div><label>2. <textarea name="mc_choices[]" rows="3" oninput="updateAnswerOptions()"
                                        required></textarea></label><br></div>
                            <div><label>3. <textarea name="mc_choices[]" rows="3" oninput="updateAnswerOptions()"
                                        required></textarea></label><br></div>
                            <div><label>4. <textarea name="mc_choices[]" rows="3" oninput="updateAnswerOptions()"
                                        required></textarea></label><br></div>
                            {% endif %}
                        </div>
                        <button type="button" onclick="addChoice()">보기 추가</button>
                        <button type="button" onclick="removeChoice()">보기 제거</button><br>
                        <div id="mc_answers">
                            <h4>정답</h4>
                        </div>
                    </div>
        
                    <div id="subjective" style="display: {% if question.Type == 'subjective' %}block{% else %}none{% endif %};">
                        <h3>주관식 문제</h3>
                        <label>문제: <textarea name="sub_question" rows="3"
                                required>{{ question.Question }}</textarea></label><br>
                        <label>정답: <textarea name="sub_answer" rows="3"
                                required>{{ question.Answers[0] if question.Answers else question.Answer }}</textarea></label><br>
                    </div>
        
                    <div id="fill_in_the_blank"
                        style="display: {% if question.Type == 'fill_in_the_blank' %}block{% else %}none{% endif %};">
                        <h3>빈칸 채우기 문제</h3>
                        <label>문제: (작성예: 한국의 수도는{ }이고, 미국의 수도는 { }이다.)<textarea name="fib_question" rows="3"
                                required>{{ question.Question }}</textarea></label><br>
                        <button type="button" onclick="generateAnswerFields()">정답 입력</button><br><br>
                        
                        <div id="fib_answers">
                            {% if question.Type == 'fill_in_the_blank' %}
                                {% for key, value in question.Answers.items() %}
                                    {% if key.startswith('Blank#') %}
                                            <label>{{ key }}</label>
                                            <input name="fib_answer[]" type="text" value="{{value}}" required>
                                    {% endif %}
                                {% endfor %}
                            {% endif %}
                        </div>
                        <div id="other_choices">
                            <h4>오답 보기 추가 (선택)</h4>
                            {% if question.Type == 'fill_in_the_blank' %}
                            {% for key, value in question.Answers.items() %}
                                {% if key.startswith('other#') %}
                                    <div>
                                        <textarea name="fib_others[]" rows="2">{{ value }}</textarea>
                                    </div> 
                                {% endif %}
                            {% endfor %}
                            {% endif %}
                        </div>
                        
                        <button type="button" onclick="addChoice()">보기 추가</button>
                        <button type="button" onclick="removeChoice()">보기 삭제</button><br>
                    </div>
        
                    <h3>분류</h3>
                    <label>대분류:
                        <select id="main_category" name="main_category">
                            <option value="">대분류 선택</option>
                        </select>
                    </label><br>
                    <label>중분류:
                        <select id="sub_category" name="sub_category">
                            <option value="">중분류 선택</option>
                        </select>
                    </label><br>
                    <label>소분류:
                        <select id="minor_category" name="minor_category">
                            <option value="">소분류 선택</option>
                        </select>
                    </label><br>
        
                    <label>출처: <input type="text" name="source" value="{{ question.Source }}"></label><br>
                    <label>태그: <textarea name="tags" rows="3">{{ question.Tags }}</textarea></label><br>
        
                    <input type="submit" value="수정">
                </form>
                <form action="{{ url_for('index') }}" method="GET">
                    <button type="submit">취소</button>
                </form>
            </div>
        </body>
        
        </html>

        change_password.html
        --------------------
        <!DOCTYPE html>
        <html lang="ko">
        <head>
           <meta charset="UTF-8">
           <title>비밀번호 변경</title>
           <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
        </head>
        <body>
           <div class="form-container">
               <h1>SSAT 출제 시스템</h1>
               <h1>비밀번호 변경</h1>
        
        
               {% with messages = get_flashed_messages(with_categories=true) %}
                   {% if messages %}
                       <ul class="flashes">
                           {% for category, message in messages %}
                               <li class="{{ category }}">{{ message }}</li>
                           {% endfor %}
                       </ul>
                   {% endif %}
               {% endwith %}
        
        
               <form action="{{ url_for('change_password') }}" method="POST">
                   <label>기존 비밀번호: <input type="password" name="old_password" required></label><br>
                   <label>새 비밀번호: <input type="password" name="new_password" required></label><br>
                   <label>새 비밀번호 확인: <input type="password" name="confirm_password" required></label><br>
                   <input type="submit" value="변경">
               </form>
               <form action="{{ url_for('index') }}" method="GET">
                   <button type="submit">취소</button>
               </form>
           </div>
        </body>
        </html>

        manage_categories.html
        ----------------------
        <!DOCTYPE html>
        <html lang="ko">
        <head>
           <meta charset="UTF-8">
           <title>분류 관리</title>
           <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
           <style>
               .button-group {
                   display: flex;
                   justify-content: space-between;
                   margin-top: 10px;
               }
               .button-group button,
               .button-group input[type="submit"] {
                   flex: 1;
                   margin-right: 10px;
               }
               .button-group button:last-child {
                   margin-right: 0;
               }
           </style>
        </head>
        <body>
           <div class="form-container">
               <h1>SSAT 출제 시스템</h1>
               <h1>분류 관리</h1>
        
        
               {% with messages = get_flashed_messages(with_categories=true) %}
                   {% if messages %}
                       <ul class="flashes">
                           {% for category, message in messages %}
                               <li class="{{ category }}">{{ message }}</li>
                           {% endfor %}
                       </ul>
                   {% endif %}
               {% endwith %}
        
        
               <form action="{{ url_for('manage_categories') }}" method="POST">
                   <label>분류 JSON:</label><br>
                   <textarea name="categories_content" rows="20" style="width: 100%;">{{ categories }}</textarea><br>
                   <div class="button-group">
                       <input type="submit" value="저장">
                       <button type="button" onclick="window.location.href='{{ url_for('index') }}'">나가기</button>
                   </div>
               </form>
               <a href="{{ url_for('download_categories') }}" class="download-btn">분류 JSON 다운로드</a>
           </div>
        </body>
        </html>

        register.html
        -------------
        <!DOCTYPE html>
        <html lang="ko">
        <head>
           <meta charset="UTF-8">
           <title>회원가입</title>
           <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
        </head>
        <body>
           <div class="form-container">
               <h1>SSAT 출제 시스템</h1>
               <h1>회원가입</h1>
        
        
               {% with messages = get_flashed_messages(with_categories=true) %}
                   {% if messages %}
                       <ul class="flashes">
                           {% for category, message in messages %}
                               <li class="{{ category }}">{{ message }}</li>
                           {% endfor %}
                       </ul>
                   {% endif %}
               {% endwith %}
        
        
               <form action="{{ url_for('register') }}" method="POST">
                   <label>사용자 ID: <input type="text" name="user_id" required></label><br>
                   <label>비밀번호: <input type="password" name="password" required></label><br>
                   <input type="submit" value="회원가입">
               </form>
               <p class="switch-form">이미 계정이 있으신가요? <a href="{{ url_for('login') }}">로그인</a></p>
           </div>
        </body>
        </html>

    __pycache__/
        app.cpython-310.pyc
        -------------------
        o
        
            ^mfH                     @   s>  d dl mZmZmZmZmZmZmZmZ d dl	m
        Z
        m
        Z
        m
        Z
        m
        Z
        mZmZ d dlZd dlZd dlmZ d dlmZ d dlmZ d dlZd dlm
        Z
        m
        Z
         d dl
        m
        Z
         eeZ de _!e
         Z"e"#e  de"_$d	Z%d
        Z&d
        Z'd
        Z(d
        Z)ej*+e%se,e%dddZ-ej.g e-ddd W d   n1 sw   Y  ej*+e&se,e&dddZ-ej.g e-ddd W d   n1 sw   Y  ej*+e'se,e'dddZ-ej.g e-ddd W d   n1 sw   Y  ej*+e(se,e(dddZ-ej.dg ie-ddd W d   n	1 sw   Y  G dd de
        Z/e"j0dd Z1dd Z2dd
         Z3e 4d
        e
        d
        d Z5e j4d d!d"gd#d$d% Z6e j4d&d!d"gd#d'd Z7e 4d(e
        d)d* Z8d d+l9m:Z: d,Z;e;e j<d-< ej*+e;she=e; d.d/ Z>e j4d0d"gd#e
        d1d2 Z?e j4d3d!d"gd#e
        d4d5 Z@d dlAZAe j4d6d"gd#e
        d7d8 ZBe j4d9d"gd#e
        d:d; ZCe j4d<d"gd#e
        d=d> ZDe 4d?e
        d@dA ZEe 4dBe
        dCdD ZFe 4dEe
        dFdG ZGe 4dHe
        dIdJ ZHe j4dKd!gd#e
        dLdM ZIe j4dNd!d"gd#e
        dOdP ZJe j4dQd!d"gd#e
        dRdS ZKedTkr
        e jLdUdVdW dS dS )X    )Flaskrender_templaterequestredirectflashurl_for	send_filejsonify)
        LoginManager	UserMixin
        login_userlogin_required
        logout_user
        current_userN)BytesIO)generate_password_hashcheck_password_hash)datetimeZyour_secret_keyloginz	data.jsonz
        users.jsonzvoc.jsonzcategories.jsonztemplates/NanumGothic.ttfwutf-8encodingF   
        ensure_asciiindent
        categoriesc                   @   s0   e Zd Zdd Zedd Zdd Zdd Zd	S )
        Userc                 C   s   || _ d | _d S N)id
        password_hash)selfr     r#   #/workspaces/codespaces-blank/app.py__init__2   s   
        z
        User.__init__c                    sr   t tddd
        }t|}W d    n1 sw   Y  t fdd|D d }|r7t|d }|d |_|S d S )Nrr   r   c                 3   s     | ]
        }|d   kr|V  qdS )r    Nr#   ).0uuser_idr#   r$   	<genexpr>;   s   
         zUser.get.<locals>.<genexpr>r    password)open
        USERS_FILEjsonloadnextr
           r!   )r*   fusersuserZuser_objr#   r)   r$   get7   s   
        
        
        
        zUser.getc                 C   s   t || _d S r   )r   r!   r"   r,   r#   r#   r$   
        set_passwordC   s   zUser.set_passwordc                 C   s
           t | j|S r   )r   r!   r6   r#   r#   r$   check_passwordG   s   
        zUser.check_passwordN)__name__
        __module__
        __qualname__r%   
        staticmethodr5   r7   r8   r#   r#   r#   r$   r
           1   s
            
        
        
        r
           c                 C   s
           t | S r   )r
           r5   r)   r#   r#   r$   	load_userK   s   
        r=   c                    s    fdd}|S )Nc                    s0   t  }tt| | d }| dd|ddS )Ng      Y@z.1fz%
        (d))sumintround)Zpcttotalvalvaluesr#   r$   	my_formatQ   s   z!autopct_format.<locals>.my_formatr#   )rF   rG   r#   rE   r$   autopct_formatP   s   
        rH   c           
              C   s  i }t | }| D ]+}d|v r3d|d v r3|d d r |d d nd}||v r/||  d7  < qd||< qt| }t| }tjtdd}tjdd tj	||t
        |d	d
         t
         j
        D ]}|
        | q]t  t }	tj|	d
        d
         |	d
         t|	  }
        t  |
        S )NCategorymainu	   미분류   
           )fnamesize)   rO   )Zfigsize   )labelsZautopctZ
        startangleZpng)formatr   )lenlistkeysrF   fmZFontProperties	FONT_PATHpltZfigureZpierH   ZgcaZtextsZset_fontpropertiesZ
        tight_layoutr   Zsavefigseekbase64	b64encodegetvaluedecodeclose)
        dataZcategory_counttotal_questionsquestioncategoryrQ   ZsizesZfontproplabelZimgZ
        img_base64r#   r#   r$   generate_category_pie_chartX   s.   
        
        
        
        
        
        rd   /c            	   
           C   s  t tddd
        } t| }W d    n1 sw   Y  tjdkr$|}ndd |D }tjd}tjdd	tjd
        d	tjd
        d	d
        }tjd
        }tjdd	}|D ]
        }d|vr_d|d< d|vrgd|d< d|vso|d ssd|d< qUt	|}t
        d|t|||||t
        |d	S )Nr&   r   r   adminc                 S   s
           g | ]
        }|d  t jkr|qS )
        SubmitterIDr   r    r'   qr#   r#   r$   
        <listcomp>   s   
         zindex.<locals>.<listcomp>	last_typelast_main_category last_sub_categorylast_minor_categoryrJ   subminor	last_tags
        last_sourceSourceu
           출처 없음SubmissionTimezN/ALastModifiedTimeu   수정되지 않음z
        index.html)Z	questionsr4   rl   
        last_categoryrt   ru   
        chart_base64r`   )
        r-   	DATA_FILEr/   r0   r   r    r   cookiesr5   rd   r   rS   )	r2   r_   Zuser_questionsrl   ry   rt   ru   ra   rz   r#   r#   r$   index{   s.   
        
        
        
        
        
        
        
        
        r}   z	/registerGETPOST)methodsc                  C   s   t jdkrzt jd } t jd }t| }|d ur!tdd tdS t| }|| ttddd
        }t	
        |}W d    n1 sAw   Y  |
        | |j
        d	 ttd
        dd}t	j
        ||d
        d
        d
         W d    n1 sjw   Y  tdd ttdS tdS )Nr   r*   r,   zUser ID already exists.errorr&   r   r   )r    r,   r   Fr   r   z
        User registered successfully!successr   z
        register.html)r   methodformr
           r5   r   r7   r-   r.   r/   r0   appendr!   dumpr   r   r   )r*   r,   r4   r2   r3   r#   r#   r$   register   s&   
        
        
        
        
        
        
        
        
        
        
        
        r   z/loginc                  C   s   t jdkrZt jd } t jd }t| }|d u s
        ||s&tdd t
        dS t| tt	d}|j
        ddd	d
         |j
        d
        dd	d
         |j
        d
        dd	d
         |j
        d
        dd	d
         |j
        ddd	d
         |S t
        dS )Nr   r*   r,   z
        Invalid user ID or password.r   r}   rl   rn   r   expiresrm   ro   rp   rt   z
        login.html)
        r   r   r   r
           r5   r8   r   r
           r   r   
        set_cookier   )r*   r,   r4   responser#   r#   r$   r      s    
        
        
        
        
        
        
        z/logoutc                  C   sf   t   ttd} | jdddd | jdddd | jdddd | jdddd | jd	ddd | S )
        Nr   rl   rn   r   r   rm   ro   rp   rt   )r   r   r   r   )r   r#   r#   r$   logout   s   
        r   )secure_filenameZ
        image_data
        UPLOAD_FOLDERc                 C   sf   | r1t jtjd t|dd dd }t j|s#t | t j||}| 	| |S d S )Nr   _.r   )
        ospathjoinappconfigstrsplitexistsmakedirssave)filefilename
        folder_pathfilepathr#   r#   r$   
        save_image   s   ,
        
        
        r   z/submitc               
           C   s`  t jd } g }| dkr
        t jd }t jd}t jd}nB| dkr/t jd }t jd }|g}n0| d	kr_t jd
         }t jd
        }t jd
        }d
        d t|D }t|D ]
        \}}||d|d  < qQt jd }	t jd }
        t jd }
        t jd }
        t jd }
        zttddd
        }t|}W d    n1 sw   Y  |rtdd |D dd
        d nd}|| |||t	j
        |	|
        |
        d
        |
        |
        t
        
         
        d
        dd 
        }|| ttd!dd}tj||d"d#d$ W d    n1 sw   Y  td%d& ttd'}|d(|  |d)|	 |d*|
         |d+|
         |d,|
         |W S  ty) } ztd-| d. W Y d }~nd }~ww ttd'S )/N
        question_typemultiple
        mc_question
        mc_choices[]
        mc_answers[]
        subjective
        sub_question
        sub_answerfill_in_the_blank
        fib_question
        fib_answer[]
        fib_others[]c                 S       i | ]
        \}}d |d  |qS zBlank#rK   r#   r'   ianswerr#   r#   r$   
        <dictcomp>        z#submit_question.<locals>.<dictcomp>other#rK   
        main_category
        sub_categoryminor_categorytagssourcer&   r   r   c                 S   s   g | ]}|d  qS IDr#   )r'   itemr#   r#   r$   rk     s    z#submit_question.<locals>.<listcomp>r   )defaultrq   %Y-%m-%d %H:%M:%Srn   )
        r   TypeQuestionChoicesAnswersrg   rI   Tagsrv   rw   rx   r   Fr   r   z Question successfully submitted!r   r}   rl   rm   ro   rp   rt   z1An error occurred while submitting the question: r   )r   r   getlist	enumerater-   r{   r/   r0   maxr   r    r   nowstrftimer   r   r   r   r   r   	Exception)r   choicesra   answersr   
        raw_answersZothersr   otherr   r   r   r   r   r2   r_   Znew_idZnew_datar   er#   r#   r$   submit_question   sv   
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        "
        
        
        
        
        
        
        
        
        
        
        
        r   z/edit/<int:question_id>c           
           
              s
          t tddd
        }t|}W d    n1 sw   Y  tfdd|D d }|d u r7tdd ttdS tj	d	krtj
        d
         }i  |d
        krYtj
        d
         tj
        
        d
        tj
        
        dd nF|dkrktj
        d tj
        d gd d n4|dkrtj
        
        d}tj
        
        d}dd t
        |D }t
        |D ]
        \}}	|	|d|d  < qtj
        d |d d  
        |d
         |tjtj
        d
         tj
        d
         tj
        d d tj
        d! tj
        d" |d# t d$d%  fd&d'|D }t td(dd}tj||d)d*d+ W d    n1 sw   Y  td,d- ttdS td.|d/S )0Nr&   r   r   c                 3   8    | ]}|d   kr|d t jkst jdkr|V  qdS r   rg   rf   Nrh   ri   
        question_idr#   r$   r+   5     6 z edit_question.<locals>.<genexpr>z<Question not found or you do not have permission to edit it.r   r}   r   r   r   r   r   r   )r   r   r   r   r   r   )r   r   r   r   r   r   c                 S   r   r   r#   r   r#   r#   r$   r   O  r   z!edit_question.<locals>.<dictcomp>r   rK   r   r   r   r   r   rq   r   r   rw   r   )r   r   rg   rI   r   rv   rw   rx   c                    s    g | ]
        }|d  kr
        |n qS r   r#   ri   Z
        new_questionr   r#   r$   rk   j  r   z!edit_question.<locals>.<listcomp>r   Fr   r   z
        Question successfully updated!r   zedit_question.html)ra   )r-   r{   r/   r0   r1   r   r   r   r   r   r   r   r   updater   r    r   r   r   r   r   )
        r   r2   r_   ra   r   r   Z
        other_choicesr   r   r   r#   r   r$   
        edit_question.  sd   
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        r   z/delete/<int:question_id>c              
              s0  zwt tddd
        }t|}W d    n1 sw   Y  t fdd|D d }|rqtjtj	d t
         }tj
        |rBt
        
        |  fdd|D }t td	dd}tj||d
        d
        d
         W d    n1 sfw   Y  td
        d ntdd W n ty } ztd| d W Y d }~nd }~ww ttdS )Nr&   r   r   c                 3   r   r   rh   ri   r   r#   r$   r+     r   z"delete_question.<locals>.<genexpr>r   c                    s
           g | ]
        }|d   kr|qS r   r#   ri   r   r#   r$   rk     s   
         z#delete_question.<locals>.<listcomp>r   Fr   r   z4Question and associated images successfully deleted!r   z>Question not found or you do not have permission to delete it.r   z/An error occurred while deleting the question: r}   )r-   r{   r/   r0   r1   r   r   r   r   r   r   r   shutilrmtreer   r   r   r   r   )r   r2   r_   ra   r   r   r#   r   r$   delete_question~  s*   
        
        
        
        
        
        
        
        
        r   z
        /delete_imagec               
           C   s   zOt  } | d }| d }d| dd| dd}d|v r0|dd	 }d
        | d| d||< tjtjd
         t||| }tj	|rJt
        | t
        d
        d
        W S  t
        yi } zt
        dt|dW  Y d }~S d }~ww )Nr   
        image_typeZ
        img_question_z.pngZ
        img_answer_)Zquestion_imageZ
        answer_imageZ
        choice_image_r      Z
        img_choice_r   T)r   F)r   r   )
        r   get_jsonr   r   r   r   r   r   r   r   remover	   r   )r_   r   r   Z
        filename_mapZ
        choice_numZ
        image_pathr   r#   r#   r$   
        delete_image  s$   
        
        
        
        
        
        
        r   z
        /submit_vocc               
           C   s   t jd } t jd }| |tjd}zHttddd
        }t|}W d    n1 s)w   Y  || ttddd}tj	||dd	d
         W d    n1 sNw   Y  t
        d
        d
         W n t
        ys } zt
        d
        | d W Y d }~nd }~ww t
        t
        dS )Nvoc_type
        voc_content)r   ZContentrg   r&   r   r   r   Fr   r   zVOC successfully submitted!r   z,An error occurred while submitting the VOC: r   r}   )r   r   r   r    r-   VOC_FILEr/   r0   r   r   r   r   r   r   )r   r   Znew_vocr2   Zvoc_datar   r#   r#   r$   
        submit_voc  s(   
        
        
        
        
        
        
        
        r   z
        /download_vocc                   C   
           t tddS NT
        as_attachment)r   r   r#   r#   r#   r$   
        download_voc     
        r   z	/downloadc                   C   r   r   )r   r{   r#   r#   r#   r$   download  r   r   z/download_usersc                   C   s,   t jdkr
        ttddS tdd ttdS )Nrf   Tr   z1You do not have permission to download this file.r   r}   )r   r    r   r.   r   r   r   r#   r#   r#   r$   download_users  s   
        
        
        
        r   z/download_categoriesc                   C   r   r   )r   CATEGORIES_FILEr#   r#   r#   r$   download_categories  r   r   z
        /categoriesc                  C   sF   t tddd} t| }W d    t|S 1 sw   Y  t|S )Nr&   r   r   )r-   r   r/   r0   r	   )r2   r
           r#   r#   r$   get_categories  s
           
        
        r   z/manage_categoriesc                  C   s   t jdkrtdd ttdS tjdkrVtjd } z,t	| }t
        t
        ddd	}tj
        ||d
        d
        d
         W d    n1 s;w   Y  td
        d W n tj
        yU   tdd Y nw t
        t
        ddd	
        }t|}W d    n1 smw   Y  tdtj|d
        d
        d
        dS )Nrf   z0You do not have permission to manage categories.r   r}   r   categories_contentr   r   r   Fr   r   z Categories updated successfully!r   zInvalid JSON format.r&   zmanage_categories.html)r
           )r   r    r   r   r   r   r   r   r/   loadsr-   r   r   JSONDecodeErrorr0   r   dumps)r   r
           r2   r#   r#   r$   manage_categories  s$   
        
        
        
        
        
        
        
        
        r   z/change_passwordc                  C   s0  t jdkrt jd } t jd }t jd }ttj}|| s(tdd tdS ||kr5tdd tdS |	| t
        t
        dd	d
        
        }t
        
        |}W d    n1 sQw   Y  |D ]}|d
         |jkrh|j|d
        <  nqXt
        t
        d
        d	d
        }t
        j||ddd W d    n1 sw   Y  tdd ttdS tdS )Nr   
        old_password
        new_passwordconfirm_passwordzOld password is incorrect.r   zNew passwords do not match.r&   r   r   r    r,   r   Fr   r   z
        Password changed successfully!r   r}   zchange_password.html)r   r   r   r
           r5   r   r    r8   r   r7   r-   r.   r/   r0   r!   r   r   r   r   )r   r   r   r4   r2   r3   r(   r#   r#   r$   change_password  s4   
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        r   __main__Ti\  )debugport)Mflaskr   r   r   r   r   r   r   r	   Z
        flask_loginr
           r
           r
           r
           r   r   r/   r   Zmatplotlib.pyplotZpyplotrX   Zmatplotlib.font_managerZ
        font_managerrV   ior   rZ   Zwerkzeug.securityr   r   r   r9   r   
        secret_keyZ
        login_managerZinit_appZ
        login_viewr{   r.   r   r   rW   r   r   r-   r2   r   r
           Z
        user_loaderr=   rH   rd   router}   r   r   r   Zwerkzeug.utilsr   r   r   r   r   r   r   r   r   r   r   r   r   r   r   r   r   r   runr#   r#   r#   r$   <module>   s   (  
        
        
        
        
        
        
        
        
        
        
        
        
        #
         
        
        
        
        
        
        
        
        
        F
        L
        
        
        
        
        
        
        
        
        
        
        
        
        

    static/
        styles.css
        ----------
        body {
           font-family: Arial, sans-serif;
           background-color: #f5f5f5;
           margin: 0;
           padding: 0;
        }
        
        
        h1, h2 {
           text-align: center;
           margin-top: 20px;
        }
        
        
        .form-container {
           max-width: 800px;
           margin: 20px auto;
           padding: 20px;
           border: 1px solid #ccc;
           border-radius: 5px;
           background-color: #fff;
        }
        
        
        form {
           width: 100%;
           margin: 0 auto;
           padding: 20px 0;
        }
        
        
        label {
           display: block;
           margin-bottom: 10px;
        }
        
        
        input[type="text"],
        input[type="password"],
        input[type="number"],
        textarea {
           /* width: 100%; */
           padding: 8px;
           margin-top: 5px;
           margin-bottom: 20px;
           border: 1px solid #ccc;
           border-radius: 4px;
        }
        
        
        input[type="radio"] {
           margin-right: 10px;
        }
        
        
        button {
           padding: 10px 20px;
           margin-right: 10px;
           border: none;
           border-radius: 4px;
           background-color: #007bff;
           color: white;
           cursor: pointer;
        }
        
        
        button:hover {
           background-color: #0056b3;
        }
        
        
        input[type="submit"] {
           width: 100%;
           padding: 10px;
           border: none;
           border-radius: 4px;
           background-color: #28a745;
           color: white;
           cursor: pointer;
           font-size: 16px;
        }
        
        
        input[type="submit"]:hover {
           background-color: #218838;
        }
        
        
        .switch-form {
           text-align: center;
           margin-top: 20px;
        }
        
        
        #multiple_choice,
        #subjective {
           margin-top: 20px;
        }
        
        
        #choices label {
           display: flex;
           align-items: center;
        }
        
        
        #choices textarea {
           flex: 1;
           margin-left: 10px;
           margin-bottom: -20px;
        }
        
        #question {
           display: flex;
           margin-bottom: 20px;
        }
        
        #question label {
           display: block;
           margin-bottom: -20px;
        }
        
        
        #question textarea {
           flex: 1;
        }
        
        .flashes {
           list-style-type: none;
           padding: 0;
           margin: 20px auto;
           width: 50%;
           text-align: center;
        }
        
        
        .flashes li {
           padding: 10px;
           border-radius: 5px;
           margin-bottom: 10px;
           color: white;
        }
        
        
        .flashes li.success {
           background-color: #28a745;
        }
        
        
        .flashes li.error {
           background-color: #dc3545;
        }
        
        
        .container {
           max-width: 800px; /* 컨테이너의 최대 너비를 설정 */
           margin: 20px auto;
           padding: 20px;
           border: 1px solid #ccc;
           border-radius: 5px;
           background-color: #fff;
        }
        
        
        .questions-list {
           max-height: 400px;
           overflow-y: auto;
        }
        
        
        .question {
           margin-bottom: 20px;
        }
        
        
        .download-btn {
           display: inline-block;
           margin: 10px 0;
           padding: 10px 20px;
           border-radius: 4px;
           background-color: #007bff;
           color: white;
           text-decoration: none;
           cursor: pointer;
        }
        
        
        .download-btn:hover {
           background-color: #0056b3;
        }
        
        
        .popup {
           display: none;
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           width: 40%;
           background-color: white;
           box-shadow: 0 5px 15px rgba(0,0,0,0.3);
           padding: 20px;
           z-index: 1000;
           border-radius: 8px;
        }
        
        
        .popup-overlay {
           display: none;
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background: rgba(0,0,0,0.7);
           z-index: 999;
        }
        
        
        .popup-header {
           display: flex;
           justify-content: space-between;
           align-items: center;
        }
        
        
        .popup-header h2 {
           margin: 0;
        }
        
        
        .popup-header .close {
           cursor: pointer;
           font-size: 1.5em;
        }
        
        
        #feedback-button {
           position: fixed;
           bottom: 20px;
           right: 20px;
           padding: 10px 20px;
           background-color: #007bff;
           color: white;
           border: none;
           border-radius: 4px;
           cursor: pointer;
           box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        
        #feedback-button:hover {
           background-color: #0056b3;
        }
        
        
        body {
           padding: 0 10%;
        }
        
        
        textarea {
           resize: vertical;
        }
        
        
        .title-container {
           display: flex;
           justify-content: center;
           align-items: center;
           margin-bottom: 20px;
        }
        
        
        .title-container h2 {
           margin: 0;
        }
        
        
        .title-container .download-btn {
           margin-left: 10px;
        }
        
        
        .admin-btns {
           display: flex;
           justify-content: center;
           margin-bottom: 20px;
        }
        
        
        .admin-btns .download-btn {
           margin: 0 10px;
        }
        
        
        .questions-list {
           max-width: 800px;
           margin: 0 auto;
        }
        
        
        .form-container {
           max-width: 800px;
           margin: 0 auto;
        }
        
        
        #mc_answers label {
           display: inline-block;
           margin-right: 10px;
        }
